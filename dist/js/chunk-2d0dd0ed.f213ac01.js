(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd0ed"],{8087:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[e.edit_form?[t("v-text-field",{attrs:{label:"Логин","error-messages":e.error.login},on:{keyup:e.check_login},model:{value:e.login,callback:function(a){e.login=a},expression:"login"}}),t("v-text-field",{attrs:{label:"Фамилия","error-messages":e.error.name_f},on:{keyup:function(a){return e.check_data()}},model:{value:e.name_f,callback:function(a){e.name_f=a},expression:"name_f"}}),t("v-text-field",{attrs:{label:"Имя","error-messages":e.error.name_i},on:{keyup:function(a){return e.check_data(e.a)}},model:{value:e.name_i,callback:function(a){e.name_i=a},expression:"name_i"}}),t("v-text-field",{attrs:{label:"Отчество","error-messages":e.error.name_o},on:{keyup:function(a){return e.check_data()}},model:{value:e.name_o,callback:function(a){e.name_o=a},expression:"name_o"}}),t("v-text-field",{attrs:{label:"Телефон","error-messages":e.error.phone},on:{keyup:function(a){return e.check_data(e.a)}},model:{value:e.phone,callback:function(a){e.phone=a},expression:"phone"}}),e.set_password?t("div",[t("v-text-field",{attrs:{label:"Задайте пароль","error-messages":e.error.password},on:{keyup:e.check_login},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),t("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),e.gen_pas(a)}}},[e._v("сгенерировать пароль")]),e._v("\n                     \n                    "),t("v-btn",{ref:"button",attrs:{color:"red",small:""},on:{click:function(a){e.set_password=!1}}},[e._v("Отменить изменение пароля")])],1):t("div",[t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.set_password=1}}},[e._v("Назначить пароль")])]),t("errors",{attrs:{errors:e.errors}}),t("br"),t("br"),t("v-btn",{ref:"button",attrs:{color:"primary",small:"",disabled:!e.data_ok},on:{click:function(a){return e.save()}}},[e._v("Изменить")]),e._v(" \n                  "),t("v-btn",{ref:"button",attrs:{color:"red",small:""},on:{click:e.cancel_edit}},[e._v("Отменить")])]:[t("div",[e._v("Email: "+e._s(e.login))]),t("div",[e._v("Фамилия: "+e._s(e.name_f))]),t("div",[e._v("Имя: "+e._s(e.name_i))]),t("div",[e._v("Отчество: "+e._s(e.name_o))]),t("div",[e._v("Телефон: "+e._s(e.phone))]),t("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(a){e.edit_form=!0}}},[e._v("Изменить")]),e._v(" \n            ")],t("br")],2)},n=[],r=t("4bb9"),o={props:["apteka"],created(){this.name_f=this.apteka.m_name_f,this.name_i=this.apteka.m_name_i,this.name_o=this.apteka.m_name_o,this.phone=this.apteka.m_phone,this.login=this.apteka.m_login,this.check_login()},data(){return{chk_login_cnt:0,data_ok:!0,edit_form:!1,success:!1,set_password:!1,name_f:"",name_i:"",name_o:"",login:"",phone:"",password:"",errors:[],error:{name_f:"",name_i:"",name_o:"",login:"",phone:""}}},methods:{gen_pas(){this.password=Object(r["b"])()},clear_errors(){this.data_ok=!0,this.errors=[];for(let e in this.error)this.error[e]=""},check_login(){this.clear_errors(),Object(r["a"])(this.login)?0==this.chk_login_cnt&&(this.chk_login_cnt++,this.$http.post(BackendBase+"/anna/check-account-login",{login:this.login,id:this.apteka.m_id}).then(e=>{let a=e.data;this.chk_login_cnt--,a.success?this.check_data():a.errors.length&&(this.error["login"]=a.errors[0])})):(this.error["login"]="Логин "+this.login+" должен является валидным адресом электронной почты",this.data_ok=!1)},check_data(){this.phone=Object(r["e"])(this.phone),this.clear_errors(),Object(r["d"])(this.phone)||(this.error["phone"]="Введите номер телефона в правильном формате",this.data_ok=!1),this.name_f||(this.error["name_f"]="укажите фамилию",this.data_ok=!1),this.name_i||(this.error["name_i"]="укажите имя",this.data_ok=!1),this.name_o||(this.error["name_o"]="укажите отчество",this.data_ok=!1),this.set_password&&this.password.length<6&&(this.error["password"]="пароль должен быть не менее 6-ти символов")},load_cur_manager_data(){this.$http.post(BackendBase+"/anna/get-account-data",{id:this.apteka.m_id}).then(e=>{let a=e.data;a.success&&(a=a.data,console.log("D:",a),this.name_f=a.name_f,this.name_i=a.name_i,this.name_o=a.name_o,this.login=a.login,this.password=a.password)})},save(){this.$http.post(BackendBase+"/anna/change-apteka-account",{manager_id:this.apteka.m_id,login:this.login,phone:this.phone,name_f:this.name_f,name_i:this.name_i,name_o:this.name_o,password:this.set_password&&this.password?this.password:""}).then(e=>{let a=e.data;a.success?(this.success=!0,this.edit_form=!1):(this.errors=a.errors,this.load_cur_manager_data())}).catch(()=>{this.load_cur_manager_data()})},cancel_edit(){console.log("cancel"),this.edit_form=!1,this.load_cur_manager_data()}}},i=o,_=t("2877"),c=t("6544"),l=t.n(c),h=t("8336"),d=t("8654"),m=Object(_["a"])(i,s,n,!1,null,null,null);a["default"]=m.exports;l()(m,{VBtn:h["a"],VTextField:d["a"]})}}]);
//# sourceMappingURL=chunk-2d0dd0ed.f213ac01.js.map