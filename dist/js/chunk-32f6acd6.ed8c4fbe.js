(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32f6acd6"],{"13b3":function(t,e,s){},"1bfb":function(t,e,s){},"5c8e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-dialog",{attrs:{"max-width":"500"},model:{value:t.popup.show,callback:function(e){t.$set(t.popup,"show",e)},expression:"popup.show"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v(t._s(t.popup.header))]),s("v-card-text",[t._v("\n          "+t._s(t.popup.body)+"\n        ")])],1)],1),s("v-container",{style:{width:t.width}},[t._e(),t.fatal_errors.length?s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("Критическая ошибка")]),s("v-card-text",[s("errors",{attrs:{errors:t.fatal_errors}})],1)],1):[t.log?[s("div",["string"==typeof t.log?s("pre",{domProps:{innerHTML:t._s(t.log)}}):t._l(t.log,(function(e,i){return s("pre",{key:i,domProps:{innerHTML:t._s(e)}})}))],2)]:t._e(),s("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v(t._s(t.dialog_header))]),s("v-card-text",[t.log.length?[s("b",[t._v("обратитесь к разработчику: ")]),t._l(t.log,(function(e,i){return s("pre",{key:"l2"+i,domProps:{innerHTML:t._s(e)}})}))]:t._e(),t.errors.length?t._l(t.errors,(function(e){return s("div",{key:e.idx,staticClass:"err"},[t._v("\n                                  "+t._s(e)+"\n                              ")])})):[t._v("\n                          "+t._s(t.dialog_body)+"\n                          ")]],2),s("v-card-actions",[s("div",{staticClass:"flex-grow-1"}),s("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Продолжить работу")]),t.exists_opener()?s("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.window_close()}}},[t._v("Закрыть")]):t._e()],1)],1)],1),s("h1",{staticClass:"form_header",attrs:{color:"primary"},domProps:{innerHTML:t._s(t.form.title)}}),s("form",{attrs:{autocomplete:"off"}},[s("v-layout",{attrs:{row:"",wrap:""}},[t.cols.length?t._l(t.cols,(function(e){return s("v-flex",{key:e.idx,attrs:{"pl-3":"",md6:"",xs12:""}},t._l(e,(function(e){return s("v-card",{key:e.name,staticClass:"block"},[s("v-toolbar",{attrs:{color:"primary",dark:"",height:"35px"},on:{click:function(t){e.hide=!e.hide}}},[s("v-toolbar-title",[e.hide?t._e():s("v-icon",[t._v("keyboard_arrow_up")]),e.hide?s("v-icon",[t._v("keyboard_arrow_down")]):t._e(),s("span",[t._v(t._s(e.description)+" ")])],1),s("div",{staticClass:"flex-grow-1"})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!block.hide"}],attrs:{"pb-1":""}},[s("form-block",{attrs:{block_name:e.name,form:t.form,save:t.save,values:t.values}}),s("v-flex",{attrs:{xs12:"",lg12:"","text-lg-center":""}},[t.form.read_only?t._e():s("v-btn",{attrs:{color:"primary",disabled:t.disabled_form},on:{click:function(e){return t.save()}}},[t._v("Сохранить")])],1)],1)],1)})),1)})):t.tabs.length?[s("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(e,i){return s("v-tab",{key:"tab"+i,style:e.style,domProps:{innerHTML:t._s(e.description)}})})),1),s("v-flex",{attrs:{md12:""}},[s("v-card",{staticStyle:{width:"100%"}},[s("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(e,i){return s("v-tab-item",{key:"tabitm"+i},[s("form-block",{attrs:{block_name:e.name,form:t.form,save:t.save,values:t.values}})],1)})),1)],1)],1)]:[s("v-flex",{attrs:{md12:""}},[s("v-card",{staticStyle:{padding:"1rem"}},[s("form-block",{attrs:{block_name:"",form:t.form,save:t.save,values:t.values}}),s("v-flex",{attrs:{xs12:"",lg12:"","text-lg-center":""}},[t.form.read_only?t._e():s("v-btn",{attrs:{color:"primary",disabled:t.disabled_form},on:{click:function(e){return t.save()}}},[t._v("Сохранить")])],1)],1)],1)]],2)],1)]],2)],1)},r=[],n=s("bd04"),o=n["a"],a=(s("c5fb"),s("2877")),l=s("6544"),c=s.n(l),h=s("7496"),d=s("8336"),u=s("b0af"),_=s("99d9"),f=s("a523"),p=s("169a"),v=s("0e8f"),m=s("132d"),g=s("a722"),w=s("4e82"),b=s("1c87"),x=s("7560"),y=s("80d2"),O=s("58df");const $=Object(O["a"])(b["a"],Object(w["a"])("tabsBar"),x["a"]);var k=$.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...b["a"].options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){let t=this.to||this.href||"";if(this.$router&&this.to===Object(this.to)){const e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},mounted(){this.onRouteChange()},methods:{click(t){this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle()}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.attrs={...s.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:0},s.on={...s.on,keydown:t=>{t.keyCode===y["u"].enter&&this.click(t),this.$emit("keydown",t)}},t(e,s,this.$slots.default)}}),C=s("9d65"),T=s("c3f0");const E=Object(O["a"])(C["a"],Object(w["a"])("windowGroup","v-window-item","v-window"));var I=E.extend().extend().extend({name:"v-window-item",directives:{Touch:T["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(y["g"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(y["g"])(t.clientHeight))})}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}}),B=I.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=I.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}}),P=(s("1bfb"),s("608c"),s("9d26")),S=s("0789"),M=s("604c"),A=s("e4cd"),j=s("dc22");const D=Object(O["a"])(M["a"],A["a"]).extend({name:"base-slide-group",directives:{Resize:j["a"],Touch:T["a"]},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>"boolean"===typeof t||["always","desktop","mobile"].includes(t)}},data:()=>({internalItemsLength:0,isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return"undefined"!==typeof window},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...M["a"].options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$refs.content.style.transform=`translateX(${-t}px)`}},beforeUpdate(){this.internalItemsLength=(this.$children||[]).length},updated(){this.internalItemsLength!==(this.$children||[]).length&&this.setWidths()},methods:{genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content"},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");const s=`${t[0].toUpperCase()}${t.slice(1)}`,i=this[`has${s}`];return this.showArrows||i?this.$createElement(P["a"],{props:{disabled:!i}},this[`${e}Icon`]):null},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(S["d"],[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper"},[this.genContent()])},calculateNewOffset(t,e,s,i){const r=s?-1:1,n=r*i+("prev"===t?-1:1)*e.wrapper;return r*Math.max(Math.min(n,e.content-e.wrapper),0)},onAffixClick(t){this.$emit(`click:${t}`),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){if(this.canTouch){if(!this.isSwiping){const e=t.touchmoveX-t.touchstartX,s=t.touchmoveY-t.touchstartY;this.isSwipingHorizontal=Math.abs(e)>Math.abs(s),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-t.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:t,wrapper:e}=this.$refs,s=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-s&&(this.scrollOffset=-s):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=s&&(this.scrollOffset=s),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=this.calculateCenteredOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=this.calculateUpdatedOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},calculateUpdatedOffset(t,e,s,i){const r=t.clientWidth,n=s?e.content-t.offsetLeft-r:t.offsetLeft;s&&(i=-i);const o=e.wrapper+i,a=r+n,l=.4*r;return n<=i?i=Math.max(n-l,0):o<=a&&(i=Math.min(i-(o-a-l),e.content-e.wrapper)),s?-i:i},calculateCenteredOffset(t,e,s){const{offsetLeft:i,clientWidth:r}=t;if(s){const t=e.content-i-r/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,t))}{const t=i+r/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,t))}},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame(()=>{const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()})}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});D.extend({name:"v-slide-group",provide(){return{slideGroup:this}}});var R=s("d10f"),W=Object(O["a"])(D,R["a"],x["a"]).extend({name:"v-tabs-bar",provide(){return{tabsBar:this}},computed:{classes(){return{...D.options.computed.classes.call(this),"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows,...this.themeClasses}}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider(){this.isBooted&&this.$emit("call:slider")},genContent(){const t=D.options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange(t,e){if(this.mandatory)return;const s=this.items,i=t.path,r=e.path;let n=!1,o=!1;for(const a of s)if(a.to===i?n=!0:a.to===r&&(o=!0),n&&o)break;!n&&o&&(this.internalValue=void 0)}},render(t){const e=D.options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),L=(s("13b3"),s("afdd")),V=M["a"].extend({name:"v-window",directives:{Touch:T["a"]},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...M["a"].options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,s=e?"-reverse":"";return`v-window-${t}${s}-transition`},hasActiveItems(){return Boolean(this.items.find(t=>!t.disabled))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex((t,e)=>{return this.internalValue===this.getValue(t,e)})},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame(()=>this.isBooted=!0)},methods:{genDefaultSlot(){return this.$slots.default},genContainer(){const t=[this.genDefaultSlot()];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,s){var i,r,n;const o={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,s()}},a={"aria-label":this.$vuetify.lang.t(`$vuetify.carousel.${t}`)},l=null!=(i=null==(r=(n=this.$scopedSlots)[t])?void 0:r.call(n,{on:o,attrs:a}))?i:[this.$createElement(L["a"],{props:{icon:!0},attrs:a,on:o},[this.$createElement(P["a"],{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:`v-window__${t}`},l)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const s=this.genIcon("prev",e,this.prev);s&&t.push(s)}const s=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&s&&"string"===typeof s){const e=this.genIcon("next",s,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,s=this.items[e];return s.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,s=this.items[e];return s.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const s=this.items.length,i=s-1;return s<=2?t<e:t===i&&0===e||(0!==t||e!==i)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}}),U=V.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...V.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||M["a"].options.methods.getValue.call(this,t,e)}}}),N=s("a9ad"),z=Object(O["a"])(N["a"]).extend({name:"v-tabs-slider",render(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),K=s("a452");const H=Object(O["a"])(N["a"],K["a"],x["a"]);var q=H.extend().extend({name:"v-tabs",directives:{Resize:j["a"]},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes(){return{"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical,...this.themeClasses}},isReversed(){return this.$vuetify.rtl&&this.vertical},sliderStyles(){return{height:Object(y["g"])(this.slider.height),left:this.isReversed?void 0:Object(y["g"])(this.slider.left),right:this.isReversed?Object(y["g"])(this.slider.right):void 0,top:this.vertical?Object(y["g"])(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:Object(y["g"])(this.slider.width)}},computedColor(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",iconsAndText:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted(){this.$nextTick(()=>{window.setTimeout(this.callSlider,30)})},methods:{callSlider(){return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick(()=>{const t=this.$refs.items.selectedItems[0];if(!t||!t.$el)return this.slider.width=0,void(this.slider.left=0);const e=t.$el;this.slider={height:this.vertical?e.scrollHeight:Number(this.sliderSize),left:this.vertical?0:e.offsetLeft,right:this.vertical?0:e.offsetLeft+e.offsetWidth,top:e.offsetTop,width:this.vertical?Number(this.sliderSize):e.scrollWidth}}),!0):(this.slider.width=0,!1)},genBar(t,e){const s={style:{height:Object(y["g"])(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:t=>{this.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,s),this.setBackgroundColor(this.backgroundColor,s),this.$createElement(W,s,[this.genSlider(e),t])},genItems(t,e){return t||(e.length?this.$createElement(U,{props:{value:this.internalValue},on:{change:t=>{this.internalValue=t}}},e):null)},genSlider(t){return this.hideSlider?null:(t||(t=this.$createElement(z,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes(){let t=null,e=null;const s=[],i=[],r=this.$slots.default||[],n=r.length;for(let o=0;o<n;o++){const n=r[o];if(n.componentOptions)switch(n.componentOptions.Ctor.options.name){case"v-tabs-slider":e=n;break;case"v-tabs-items":t=n;break;case"v-tab-item":s.push(n);break;default:i.push(n)}else i.push(n)}return{tab:i,slider:e,items:t,item:s}}},render(t){const{tab:e,slider:s,items:i,item:r}=this.parseNodes();return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(e,s),this.genItems(i,r)])}}),G=s("71d9"),X=s("2a7f"),F=Object(a["a"])(o,i,r,!1,null,null,null);e["default"]=F.exports;c()(F,{VApp:h["a"],VBtn:d["a"],VCard:u["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VContainer:f["a"],VDialog:p["a"],VFlex:v["a"],VIcon:m["a"],VLayout:g["a"],VTab:k,VTabItem:B,VTabs:q,VTabsItems:U,VToolbar:G["a"],VToolbarTitle:X["b"]})},"608c":function(t,e,s){},a523:function(t,e,s){"use strict";s("20f6"),s("4b85");var i=s("e8f2"),r=s("d9f7");e["a"]=Object(i["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:s,children:i}){let n;const{attrs:o}=s;return o&&(s.attrs={},n=Object.keys(o).filter(t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(s.attrs[t]=e,!1):e||"string"===typeof e})),e.id&&(s.domProps=s.domProps||{},s.domProps.id=e.id),t(e.tag,Object(r["a"])(s,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(n||[])}),i)}})},ab0a:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return change_field})),__webpack_require__.d(__webpack_exports__,"f",(function(){return save_field_1_to_m})),__webpack_require__.d(__webpack_exports__,"c",(function(){return frontend_button_process})),__webpack_require__.d(__webpack_exports__,"d",(function(){return get_cgi_params})),__webpack_require__.d(__webpack_exports__,"e",(function(){return get_params})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calc_values}));var _main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("56d7");function on_dependence(t,e,s,i){for(let r of t.form.fields)r.name==e&&("value"in s||"instead_of_empty"in s||(i=!0),"value"in s&&r.value!=s.value&&(r.value=s.value),"instead_of_empty"in s&&!r.begin_value&&(r.value=s.instead_of_empty),"values"in s&&("object"==typeof s.values?r.values=s.values:"string"==typeof s.values?r.values=JSON.parse(s.values):r.values=[]),"hide"in s&&(r.hide=s.hide),"error"in s&&(r.error_message=s.error,r.error=!!r.error_message),"warning"in s&&(r.warning_message=s.warning),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$emit("change_field",r,i))}function change_field(t,e,s){if(!e)return;let i=e.value;"checkbox"!=e.type&&"switch"!=e.type||(i=!!parseInt(i)),t.values[e.name]=i,_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$emit("field-update:"+e.name,e),calc_values(t),s||frontend_process(t,e)}function save_field_1_to_m(t,e){if(!t.form.id)return;let s=BackendBase+"/1_to_m/update_field/"+t.form.config+"/"+e.field+"/"+e.subfield+"/"+t.form.id,i="1_to_m:change_in_slide:"+e.field+":"+e.subfield+":"+e.id;t.$http.post(s,{cur_id:e.id,value:e.value}).then(t=>{let s=t.data;s.success&&(_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$emit("1_to_m:upload_values:"+e.field,s.values),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$emit(i,{save_ok:!0})),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$emit(i,{errors:s.errors})}).catch(t=>{})}function frontend_result_process(t,e,s){if(e){let i=0;while(i<e.length){let r=e[i],n=e[i+1];on_dependence(t,r,n,s==r);i+=2}}}function frontend_button_process(t,e,s,i){if(s.ajax){s.ajax;t.$http.post(BackendBase+"/ajax/"+t.params.config+"/"+s.ajax,{values:t.values,id:t.form.id}).then(s=>{let r=s.data;r.success&&(frontend_result_process(t,r.result,e.name),i()),r.errors.length&&alert(r.errors[0])}).catch(t=>{alert("frontend_process (ajax): "+t)})}}function frontend_process(self,f){if(!f.frontend)return;let front=f.frontend;if(front.fields_dependence){let dep;eval("dep="+front.fields_dependence);let result=dep(self.values);frontend_result_process(self,result,f.name)}let timeout=600;if(front.ajax){let t=front.ajax;t.timeout&&(timeout=t.timeout),f.ajax_cnt||(f.ajax_cnt=0),f.ajax_cnt++,setTimeout(()=>{if(f.ajax_cnt--,!f.ajax_cnt&&!f.error){let e=BackendBase+"/ajax/"+self.params.config+"/"+t.name;self.$http.post(e,{values:self.values,id:self.form.id}).then(t=>{let e=t.data;e.success&&frontend_result_process(self,e.result,f.name),e.errors.length&&alert(e.errors[0])}).catch(t=>{alert("frontend_process (ajax field_name: "+f.name+" url: "+e+"): "+t)})}},timeout)}}function get_cgi_params(){let t=location.search.replace(/^\?/,""),e={};for(let s of t.split(/&/)){let t=s.split(/=/);e[t[0]]=t[1]}return e}function get_params(t){let e=location.pathname;if(/^\/edit[\-_]form\/([^\/]+)\/(\d+)$/.test(e)){let s=e.match(/^\/edit[\-_]form\/([^\/]+)\/(\d+)$/);return t.params={config:s[1],id:s[2],action:"edit"},BackendBase+"/edit-form/"+t.params.config+"/"+t.params.id}if(/^\/edit[\-_]form\/([^\/]+)?$/.test(e)){let s=e.match(/^\/edit[\-_]form\/([^\/]+)$/);return t.params={config:s[1],action:"new"},BackendBase+"/edit-form/"+t.params.config}return t.fatal_errors=["url должен быть в формате /edit_form/[config] или /edit_form/[config]/id"],!1}function calc_values(t){let e={},s=!1;for(let i of t.form.fields){if(i.error&&(s=!0),"select"==i.type){i.value||(i.value=""),i.value+="";for(let t of i.values)t.v=t.v+""}if("file"!=i.type){let t=i.value;void 0===t&&(t=""),"checkbox"!=i.type&&"switch"!=i.type||(t=t?1:0),e[i.name]=t}}t.disabled_form=s,t.values=e,t.init_color_selects()}},bd04:function(module,__webpack_exports__,__webpack_require__){"use strict";var _main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("56d7"),_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ab0a");__webpack_exports__["a"]={name:"edit-form",data:function(){return{popup:{show:!1,header:"",body:""},log:[],title:"",errors:[],disabled_form:!1,fatal_errors:[],tabs:[],tab:null,form:{id:"",title:"",read_only:!1,fields:[],config:""},cols:[],values:{},valid:!1,dialog_body:"",dialog_header:"",dialog:!1,pagination:{},params:{config:""}}},computed:{width(){return this.form.width?this.form.width+"px":""}},created(){window.EditForm=this,Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["a"])(this),this._change_field=(t,e)=>{Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["b"])(this,t,e)};let t=this;this._save_field_1_to_m=e=>{Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["f"])(t,e)},this._frontend_button_process=(t,e,s)=>{Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["c"])(this,t,e,s)},_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$on("change_field",this._change_field),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$on("save_field_1_to_m",this._save_field_1_to_m),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$on("frontend_button_process",this._frontend_button_process),this.Init()},beforeDestroy(){_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$off("change_field",this._change_field),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$off("save_field_1_to_m",this._save_field_1_to_m),_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$off("frontend_button_process",this._frontend_button_process)},watch:{errors(){this.errors.length>0&&(this.dialog=!0)}},methods:{init_tabs(t){if("tabs"in t&&t.tabs.length){let e=0;for(let s of t.tabs)s.active=!e,e++;this.tabs=t.tabs}},get_form_self(){return this},Init(){let url=Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["e"])(this);url&&this.$http.post(url,{cgi_params:Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["d"])()}).then(response=>{let data=response.data;if(data.log&&(this.log=data.log),data.success){data.title&&(this.title=data.title,document.title=this.title.replace(/<.+?>/g," "));for(let t of data.fields)"hide"in t||(t.hide=!1);this.form=data,this.form.read_only=parseInt(this.form.read_only),Object(_js_edit_form_js__WEBPACK_IMPORTED_MODULE_1__["a"])(this),this.cols=data.cols,this.init_tabs(data);for(let t of this.form.fields)"file"==t.type&&t.value&&(t.begin_value=t.value,t.value=""),"checkbox"!=t.type&&"switch"!=t.type||(t.value=parseInt(t.value)?1:0,this.values[t.name]=t.value)}data.redirect&&(window.location.href=data.redirect),data.javascript&&eval(data.javascript),this.fatal_errors=data.errors}).catch(t=>{this.fatal_errors=[t]})},init_color_selects(){for(let t of this.form.fields)if("select"==t.type)for(let e of t.values)e.v==t.value&&e["c"]&&(t.background_color=e.c)},save(){let t=BackendBase+"/edit-form/"+this.params.config+(this.form.id?"/"+this.form.id:"");this.errors=[],this.log=[],this.$http.post(t,{action:this.form.id?"update":"insert",id:this.form.id,values:this.values}).then(t=>{let e=t.data;e.log&&(this.log=e.log),this.errors=e.errors,e.success?(this.dialog_header="Сохранение изменений",this.dialog_body="Изменения успешно сохранены! Вы можете продолжить работу или закрыть карточку",e.id&&(this.form.id=e.id),this.form.id&&(this.save_files(),window.history.pushState(null,document.title,"/edit_form/"+this.params.config+"/"+this.form.id)),this.Init()):this.dialog_header="При сохранении произошли ошибки",this.dialog=!0}).catch(t=>{this.errors=["Произошла ошибка при сохранении!: "+t]})},save_files(){for(let t of this.form.fields)t.type,"file"==t.type&&t.value&&this.$http.post(BackendBase+"/edit-form/"+this.params.config+"/"+this.form.id,{action:"upload_file",name:t.name,value:t.value}).then(e=>{let s=e.data;this.errors=s.errors,s.success&&_main__WEBPACK_IMPORTED_MODULE_0__["bus"].$emit("file:"+t.name,s.value)}).catch(e=>{this.errors=["Ошибка при сохранении файла "+t.description+": "+e]})},window_close(){window.open("","_self",""),window.close()},exists_opener(){return window.opener}}}},c5fb:function(t,e,s){"use strict";var i=s("ff73"),r=s.n(i);r.a},ff73:function(t,e,s){}}]);
//# sourceMappingURL=chunk-32f6acd6.ed8c4fbe.js.map