(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35e90e53"],{"297c8":function(e,a,r){},8758:function(e,a,r){"use strict";var t=r("297c8"),s=r.n(t);s.a},9679:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("div",[e.errors.length?r("errors",{attrs:{errors:e.errors}}):[r("v-card",{attrs:{"max-width":"500px"}},[r("v-card-text",{staticStyle:{"margin-top":"20px"}},[r("h3",[e._v("Ваши регистрационные данные:")]),e.edit_reg_data?[r("v-text-field",{attrs:{label:"Логин","error-messages":e.manager_error.login},on:{keyup:e.check_reg_data},model:{value:e.manager.login,callback:function(a){e.$set(e.manager,"login",a)},expression:"manager.login"}}),r("v-text-field",{attrs:{label:"Фамилия","error-messages":e.manager_error.name_f},on:{keyup:e.check_reg_data},model:{value:e.manager.name_f,callback:function(a){e.$set(e.manager,"name_f",a)},expression:"manager.name_f"}}),r("v-text-field",{attrs:{label:"Имя","error-messages":e.manager_error.name_i},on:{keyup:e.check_reg_data},model:{value:e.manager.name_i,callback:function(a){e.$set(e.manager,"name_i",a)},expression:"manager.name_i"}}),r("v-text-field",{attrs:{label:"Отчество","error-messages":e.manager_error.name_o},on:{keyup:e.check_reg_data},model:{value:e.manager.name_o,callback:function(a){e.$set(e.manager,"name_o",a)},expression:"manager.name_o"}}),r("v-text-field",{attrs:{label:"Телефон","error-messages":e.manager_error.phone},on:{keyup:e.check_reg_data},model:{value:e.manager.phone,callback:function(a){e.$set(e.manager,"phone",a)},expression:"manager.phone"}}),0==e.change_password_step?r("div",[r("a",{attrs:{href:"",small:""},on:{click:function(a){a.preventDefault(),e.change_password_step=1}}},[e._v("изменить пароль")])]):r("div",{staticClass:"change_form"},[1==e.change_password_step?[r("v-text-field",{attrs:{label:"введите свой текущий пароль",type:"password"},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),e.error_change_password?r("div",{staticClass:"err"},[e._v("\n                        "+e._s(e.error_change_password)+"\n                      ")]):e._e(),[e.edit_reg_data&&e.password?r("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(a){return e.check_password()}}},[e._v("Ок")]):e._e(),e._v(" \n                            "),e.edit_reg_data?r("v-btn",{ref:"button",attrs:{color:"red",small:""},on:{click:function(a){e.change_password_step=0}}},[e._v("Отмена")]):e._e()]]:e._e(),2==e.change_password_step?r("div",[r("v-text-field",{attrs:{label:"введите новый пароль",type:"password"},model:{value:e.password1,callback:function(a){e.password1=a},expression:"password1"}}),r("v-text-field",{attrs:{label:"введите новый пароль ещё раз",type:"password"},model:{value:e.password2,callback:function(a){e.password2=a},expression:"password2"}}),e.error_change_password?r("div",{staticClass:"err"},[e._v("\n                          "+e._s(e.error_change_password)+"\n                        ")]):e._e(),e.change_password2_ok?[e.edit_reg_data?r("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(a){return e.change_password()}}},[e._v("Изменить пароль")]):e._e(),e._v(" \n                        ")]:e._e(),e.edit_reg_data?r("v-btn",{ref:"button",attrs:{color:"red",small:""},on:{click:function(a){e.change_password_step=0}}},[e._v("Отмена")]):e._e()],2):e._e(),3==e.change_password_step?[r("p",{staticStyle:{color:"green"}},[e._v("\n                          Ваш пароль был успешно изменён!"),r("br"),e._v("\n                          Уведомление о смене пароля было отправлено на Вашу электронную почту\n                        ")]),e.edit_reg_data?r("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(a){e.change_password_step=0}}},[e._v("Ясно")]):e._e(),e._v(" \n                      ")]:e._e()],2)]:[r("div",[e._v("\n                 "),r("b",[e._v("Email:")]),e._v(" "+e._s(e.manager.login)),r("br"),e._v("\n                 "),r("b",[e._v("ФИО:")]),e._v(" "+e._s(e.manager.name_f)+" "+e._s(e.manager.name_i)+" "+e._s(e.manager.name_o)),r("br"),e.manager.phone?r("div",[e._v(" "),r("b",[e._v("Телефон:")]),e._v(" "+e._s(e.manager.phone))]):e._e(),2==e.manager.type||3==e.manager.type?[r("br"),r("hr"),r("br"),r("p",[e._v("\n                    Если у вас отображаются не корректные данные или данные изменились, вы можете сообщить об этом вашему менеджеру или отправить запрос через форму «Изменить данные»\n                  ")])]:e._e(),e.edit_reg_data?e._e():[r("div",{staticStyle:{"text-align":"right",width:"100%"}},[e.message_edit_reg_data?[r("p",{staticStyle:{color:"red"}},[e._v("Спасибо. Ваша заявка на изменение данных отправлена на проверку")])]:[e.edit_reg_data?e._e():r("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(a){a.preventDefault(),e.edit_reg_data=!0}}},[e._v("Изменить данные")])]],2)]],2)]],2),r("errors",{attrs:{errors:e.reg_data_errors}}),0==e.change_password_step&&e.edit_reg_data?r("v-card-actions",[e.change_reg_data_success?r("div",{staticClass:"succ"},[e._v("\n              Регистрационные данные успешно обновлены "),r("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(a){return e.get_reg_data()}}},[e._v("Закрыть")])],1):[r("v-btn",{ref:"button",attrs:{color:"primary",small:"",disabled:!e.reg_data_ok},on:{click:function(a){return e.change_reg_data()}}},[e._v("Внести изменения")]),r("v-btn",{ref:"button",attrs:{color:"red",small:""},on:{click:function(a){return e.get_reg_data()}}},[e._v("Не вносить изменения")])]],2):e._e()],1)],1==e.manager.type?r("v-card",{staticStyle:{"margin-top":"10px"},attrs:{"max-width":"500px"}},[r("v-card-text",[r("h3",[e._v("Ваши юридические лица:")]),e.manager.ur_lico_list.length?e._e():r("div",[e._v("\n            У Вас нет юридических лиц\n          ")]),e._l(e.manager.ur_lico_list,(function(a,t){return r("div",{key:t},[r("a",{attrs:{href:"/edit-form/ur_lico/"+a.id,target:"_blank"}},[e._v(e._s(a.header))])])}))],2)],1):e._e(),2==e.manager.type||3==e.manager.type?r("v-card",{staticClass:"pers_manager",attrs:{"max-width":"500px"}},[r("v-card-text",[r("h3",[e._v("Ваш персональный менеджер:")]),e.manager.ma_id?[r("div",[r("b",[e._v(e._s(e.manager.ma_name_f)+" "+e._s(e.manager.ma_name_i)+" "+e._s(e.manager.ma_name_o))])]),r("div",[r("b",[e._v("Email:")]),e._v(" "),r("a",{attrs:{href:"mailto:"+e.manager.ma_email}},[e._v(e._s(e.manager.ma_email))])]),r("div",[r("b",[e._v("Телефон:")]),e._v(" "+e._s(e.manager.ma_phone?e.manager.ma_phone:"не указан"))])]:[r("p",[e._v("персональный менеджер не выбран, свяжитесь с представителями компании")])]],2)],1):e._e(),2==e.manager.type?[e.comp_list.length>0?[r("v-card",{staticClass:"ur_lico_settings",attrs:{"max-width":"800px"}},[r("v-card-text",[e._e(),r("div",[r("b",[e._v("Вы являетесь представителем "+e._s(e.comp_list.length>1?"юридических лиц":"юридического лица")+":")])]),r("v-select",{attrs:{"item-value":"id","item-text":"header",items:e.cur_comp_header_list,"single-line":"",disabled:!1,readonly:!1},model:{value:e.cur_comp_header,callback:function(a){e.cur_comp_header=a},expression:"cur_comp_header"}}),r("CompItem",{attrs:{comp:e.cur_comp,set_comp:e.set_comp,get_reg_data:e.get_reg_data,your_manager:e.your_manager}})],1)],1),e.cur_comp.apteka_list.length?r("v-card",{staticClass:"apteka_list",attrs:{"max-width":"800px"}},[r("v-card-text",[e.cur_comp?r("AptListForUl",{attrs:{get_reg_data:e.get_reg_data,comp:e.cur_comp}}):e._e()],1)],1):e._e(),r("v-card",{staticClass:"orders_change_data"},[r("v-card-text",[e.cur_comp.subscribe_actions.length?[r("p",[r("b",[e._v("Ваши аптеки подписаны на маркетинговые мероприятия:")])]),e._l(e.cur_comp.subscribe_actions,(function(a){return r("div",{key:a.ic},[r("a",{attrs:{href:"/edit-form/action/"+a.id,target:"_blank"}},[e._v(e._s(a.header))]),r("small",[e._v("("+e._s(a.date_start)+" ... "+e._s(a.date_start)+")")])])}))]:[r("p",[e._v("Ни одна из Ваших аптек не подписана на текущие маркетинговые мероприятия")])]],2)],1),r("v-card",{staticClass:"orders_change_data"},[r("v-card-text",[e.cur_comp.orders_change_apteka.length?[r("p",[r("b",[e._v("Заявки на изменение данных от аптек:")])]),e._l(e.cur_comp.orders_change_apteka,(function(a){return r("div",{key:a.id},[r("a",{attrs:{href:"/edit-form/order_change_account/"+a.id,target:"_blank"}},[e._v(e._s(a.registered)+" - "+e._s(a.ur_address))])])})),r("p",[r("b",[r("a",{attrs:{href:"/admin-table/order_change_account"}},[e._v("смотреть все заявки на изменения от аптек")])])])]:[r("p",[e._v("Заявки на изменение данных от аптек отсутствуют")])]],2)],1)]:e._e()]:e._e(),3==e.manager.type?[r("v-card",{staticClass:"ur_lico_settings",attrs:{"max-width":"500px"}},[r("v-card-text",[e.apt_list.length>0?[e._v("\n            Вы являетесь представителем "+e._s(e.apt_list.length>1?"аптек":"аптеки")+"\n                \n                "),e._l(e.apt_list,(function(a){return r("AptItem",{key:a.id,attrs:{apt:a,set_apt:e.set_apt,get_reg_data:e.get_reg_data,your_manager:e.your_manager}})}))]:e._e()],2)],1)]:e._e()],2)])},s=[],_=r("2b0e"),n=r("4bb9");_["a"].component("CompItem",()=>r.e("chunk-5750e54e").then(r.bind(null,"fa23"))),_["a"].component("AptListForUl",()=>r.e("chunk-ce2b09c8").then(r.bind(null,"f406"))),_["a"].component("AptItem",()=>r.e("chunk-2d217e50").then(r.bind(null,"c959"))),_["a"].component("AptManagerEdit",()=>r.e("chunk-2d0dd0ed").then(r.bind(null,"8087")));var o={props:[],created(){this.get_reg_data()},data:function(){return{errors:[],change_password_step:0,password:"",password1:"",password2:"",cur_comp_header:"",error_change_password:"",edit_reg_data:!1,message_edit_reg_data:!1,reg_data_errors:[],phone:"",change_reg_data_success:!1,orders_change_apteka:[],manager:{login:"",name_f:"",name_i:"",name_o:"",type:0},your_manager:{name:"Леопольд Викторович Мандельштам"},manager_error:{login:"",name_f:"",name_i:"",name_o:"",phone:""},comp_list:[],apt_list:[]}},watch:{change_password_step(){1==this.change_password_step?this.password="":2==this.change_password_step&&(this.password1="",this.password2=""),this.error_change_password=""}},computed:{cur_comp_header_list(){let e=[];for(let a of this.comp_list)e.push(a.header);return e},cur_comp(){if(this.comp_list.length&&this.cur_comp_header)for(let e of this.comp_list)if(this.cur_comp_header==e.header)return e;return{id:!1}},reg_data_ok(){for(let e in this.manager_error)if(this.manager_error[e])return console.log("error:",e,this.manager_error[e]),!1;return!0},change_password2_ok(){this.error_change_password="";let e=this.password1,a=this.password2;return e&&!/^[a-zA-Z0-9\-\+=#\@\!\^&\%\$\.\*,<>\/\\;\{\}:"']+$/.test(e)&&(this.error_change_password="новый пароль содержит недопустимые символы, проверьте раскладку клавиатуры"),e.length>=6&&e==a||(e&&a&&(e.length<6?this.error_change_password="длина пароля должна быть не менее 6-ти символов":e!=a&&(this.error_change_password="пароли не совпадают")),!1)}},methods:{set_comp(e){for(let a of this.comp_list)if(a.id==e.id)return void(a=e)},set_apt(e){for(let a of this.apt_list)if(a.id==e.id)return void(a=e)},login_check(){this.check_reg_data()},check_reg_data(){this.manager.phone=Object(n["e"])(this.manager.phone);for(let e in this.manager_error)this.manager_error[e]="";Object(n["d"])(this.manager.phone)||(this.manager_error["phone"]="Введите номер телефона в правильном формате"),Object(n["a"])(this.manager.login)||(this.manager_error["login"]="Логин должен являеть валидным адресом электронной почты"),this.manager.name_f?Object(n["c"])(this.manager.name_f)||(this.manager_error["name_f"]="допускается только кириллица"):this.manager_error["name_f"]="укажите фамилию",this.manager.name_i?Object(n["c"])(this.manager.name_i)||(this.manager_error["name_i"]="допускается только кириллица"):this.manager_error["name_i"]="укажите имя",this.manager.name_o?Object(n["c"])(this.manager.name_o)||(this.manager_error["name_o"]="допускается только кириллица"):this.manager_error["name_o"]="укажите отчество"},get_reg_data(){this.$http.get(BackendBase+"/anna/get-reg-data").then(e=>{let a=e.data;a.success&&(this.manager=a.manager,this.phone=this.manager.phone,this.comp_list=[],this.apt_list=[],setTimeout(()=>{2==this.manager.type&&(this.comp_list=a.comp_list,a.comp_list.length&&(this.cur_comp_header=a.comp_list[0].header),this.orders_change_apteka=a.orders_change_apteka),3==this.manager.type&&(this.apt_list=a.apt_list)},100),this.apt_list=a.apt_list,this.change_password_step=0,this.edit_reg_data=!1,this.reg_data_errors=[],this.check_reg_data()),this.errors=a.errors})},check_password(){this.$http.post(BackendBase+"/anna/check-password",{password:this.password}).then(e=>{let a=e.data;a.success&&(this.change_password_step=2),this.error_change_password=a.error})},change_password(){this.$http.post(BackendBase+"/anna/change-password",{login:this.manager.login,password:this.password,password1:this.password1,password2:this.password2}).then(e=>{let a=e.data;a.success&&(this.change_password_step=3),this.error_change_password=a.error})},change_reg_data(){this.check_reg_data(),this.reg_data_ok&&this.$http.post(BackendBase+"/anna/change-reg-data",{login:this.manager.login,name_f:this.manager.name_f,name_i:this.manager.name_i,name_o:this.manager.name_o,phone:this.manager.phone}).then(e=>{let a=e.data;a.success&&(this.get_reg_data(),this.message_edit_reg_data=!0,setTimeout(()=>{this.message_edit_reg_data=!1},2e3))})}}},i=o,c=(r("8758"),r("2877")),d=r("6544"),g=r.n(d),m=r("8336"),p=r("b0af"),l=r("99d9"),h=r("b974"),u=r("8654"),v=Object(c["a"])(i,t,s,!1,null,"1d4cf911",null);a["default"]=v.exports;g()(v,{VBtn:m["a"],VCard:p["a"],VCardActions:l["a"],VCardText:l["b"],VSelect:h["a"],VTextField:u["a"]})}}]);
//# sourceMappingURL=chunk-35e90e53.33b0d066.js.map