(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b5c9f1c"],{"2fa4":function(t,e,i){"use strict";i("20f6");var o=i("80d2");e["a"]=Object(o["i"])("spacer","div","v-spacer")},"4c0c":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"is_headapp"},[i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,a=e.attrs;return[t.code_for_show?i("v-btn",t._g(t._b({attrs:{color:"primary",dark:""}},"v-btn",a,!1),o),[t._v("\n          Продолжить просмотр\n        ")]):t._e()]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:"primary"}},[i("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1),i("v-toolbar-title",[t._v(t._s(t.code_for_show.header)+" ")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n              Закрыть\n            ")])],1)],1),i("div",{staticClass:"video",staticStyle:{margin:"20px"},domProps:{innerHTML:t._s(t.code_for_show.code)}})],1)],1),i("div",{staticClass:"title"},[t._v("Список видеоматериалов")]),t._l(t.list,(function(e,o){return i("div",{staticClass:"section"},[i("div",{staticClass:"section_name"},[t._v("\n                "+t._s(e.header)+"\n            ")]),i("v-row",t._l(e.child,(function(e,o){return i("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[i("div",[i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.open_video(e)}}},[t._v(t._s(e.header))])]),e.show?t._e():i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.open_video(e)}}},[i("img",{attrs:{src:e.img}})])])})),1)],1)}))],2)},a=[];const s=t=>{if(!t.code)return;let e=t.code.match(/<iframe.*?src="(.+?)"/);if(e){let i=e[1].split("/").pop();t.img=`https://img.youtube.com/vi/${i}/mqdefault.jpg`;let o=t.code.match(/<iframe.*?width="(.+?)".*?height="(.+?)"/);if(o){let e=o[1],i=o[2],a=e/i,s=window.innerWidth-150,n=s/a;n>1*window.innerWidth-200&&(n=window.innerWidth-200),s=n*a,console.log("new_height:",n),t.code=t.code.replace(/width="\d+"/,`width="${s}"`).replace(/height="\d+"/,`height="${n}"`)}}else t.img=""};var n={components:{},props:["params","is_headapp"],created(){this.$nextTick(()=>{this.load()})},data(){return{dialog:!1,code_for_show:!1,title:"",config:"",list:[],links:[],log:[]}},watch:{dialog(){this.dialog||(this.code_for_show=!1)}},methods:{open_video(t){this.dialog=!0,this.code_for_show=t;let e=!1,i=!1,o=Math.floor((new Date).getTime()/1e3);this.$http.post(BackendBase+"/VideoList/"+this.params.config,{action:"open_video",id:t.id}).then(t=>{let a=t.data;a.success&&(i=a.id,e=setInterval(()=>{if(this.code_for_show&&o){let t=Math.floor((new Date).getTime()/1e3)-o;this.$http.post(BackendBase+"/VideoList/"+this.params.config,{action:"update_open_video",id:i,seconds:t})}else console.log("clear interval"),clearInterval(e)},1e3))})},load(){this.$http.get(BackendBase+"/VideoList/"+this.params.config).then(t=>{let e=t.data;if(e.success){document.title=e.title,this.title=e.title;for(let t of e.list)for(let e of t.child)e.show=!1,s(e);this.list=e.list,this.log=e.log,this.links=e.links}})}}},c=n,r=(i("de7e"),i("2877")),l=i("6544"),d=i.n(l),h=i("8336"),f=i("b0af"),v=i("62ad"),p=i("169a"),_=i("132d"),u=i("0fd9"),g=i("2fa4"),m=i("71d9"),w=i("2a7f"),b=Object(r["a"])(c,o,a,!1,null,"cc959222",null);e["default"]=b.exports;d()(b,{VBtn:h["a"],VCard:f["a"],VCol:v["a"],VDialog:p["a"],VIcon:_["a"],VRow:u["a"],VSpacer:g["a"],VToolbar:m["a"],VToolbarItems:w["a"],VToolbarTitle:w["b"]})},"8dae":function(t,e,i){},de7e:function(t,e,i){"use strict";var o=i("8dae"),a=i.n(o);a.a}}]);
//# sourceMappingURL=chunk-3b5c9f1c.5f93f440.js.map