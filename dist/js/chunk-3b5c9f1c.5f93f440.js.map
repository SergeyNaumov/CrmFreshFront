{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VGrid/VSpacer.js","webpack:///./src/components/VideoList/VideoList.vue?0c4e","webpack:///src/components/VideoList/VideoList.vue","webpack:///./src/components/VideoList/VideoList.vue?b8b6","webpack:///./src/components/VideoList/VideoList.vue","webpack:///./src/components/VideoList/VideoList.vue?ce3a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","ref","on","_g","_b","_v","_e","model","value","callback","$$v","dialog","expression","$event","_s","code_for_show","header","staticStyle","domProps","code","_l","s","idx","v","preventDefault","open_video","show","img","staticRenderFns","fix_youtube_code","resmatch","match","Id","split","pop","size_match","width","height","k","new_width","window","innerWidth","new_height","console","log","replace","components","props","$nextTick","load","title","config","list","links","watch","methods","interval_update_seconds","rec_id","begin_show_sec","Math","floor","Date","getTime","$http","post","BackendBase","params","action","id","then","r","d","data","success","setInterval","opened_seconds","seconds","clearInterval","get","document","sect","child","component","VBtn","VCard","VCol","VDialog","VIcon","VRow","VSpacer","VToolbar","VToolbarItems","VToolbarTitle"],"mappings":"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","file":"js/chunk-3b5c9f1c.5f93f440.js","sourcesContent":["import \"../../../src/components/VGrid/_grid.sass\";\nimport { createSimpleFunctional } from '../../util/helpers';\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer');\n//# sourceMappingURL=VSpacer.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"is_headapp\"},[_c('v-dialog',{attrs:{\"fullscreen\":\"\",\"hide-overlay\":\"\",\"transition\":\"dialog-bottom-transition\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [(_vm.code_for_show)?_c('v-btn',_vm._g(_vm._b({attrs:{\"color\":\"primary\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\"\\n          Продолжить просмотр\\n        \")]):_vm._e()]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.code_for_show.header)+\" \")]),_c('v-spacer'),_c('v-toolbar-items',[_c('v-btn',{attrs:{\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"\\n              Закрыть\\n            \")])],1)],1),_c('div',{staticClass:\"video\",staticStyle:{\"margin\":\"20px\"},domProps:{\"innerHTML\":_vm._s(_vm.code_for_show.code)}})],1)],1),_c('div',{staticClass:\"title\"},[_vm._v(\"Список видеоматериалов\")]),_vm._l((_vm.list),function(s,idx){return _c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"section_name\"},[_vm._v(\"\\n                \"+_vm._s(s.header)+\"\\n            \")]),_c('v-row',_vm._l((s.child),function(v,idx){return _c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\",\"sm\":\"12\"}},[_c('div',[_c('a',{attrs:{\"href\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.open_video(v)}}},[_vm._v(_vm._s(v.header))])]),(!v.show)?_c('a',{attrs:{\"href\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.open_video(v)}}},[_c('img',{attrs:{\"src\":v.img}})]):_vm._e()])}),1)],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"is_headapp\">\n<!---->\n<v-dialog\n      v-model=\"dialog\"\n      fullscreen\n      \n      hide-overlay\n      transition=\"dialog-bottom-transition\"\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          color=\"primary\"\n          dark\n          v-bind=\"attrs\"\n          v-on=\"on\"\n          v-if=\"code_for_show\"\n        >\n          Продолжить просмотр\n        </v-btn>\n      </template>\n      <v-card>\n        <v-toolbar\n          dark\n          color=\"primary\"\n        >\n          <v-btn\n            icon\n            dark\n            @click=\"dialog = false\"\n          >\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n          <v-toolbar-title>{{code_for_show.header}} </v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-toolbar-items>\n            <v-btn\n              dark\n              text\n              @click=\"dialog = false\"\n            >\n              Закрыть\n            </v-btn>\n          </v-toolbar-items>\n        </v-toolbar>\n\n        <div class=\"video\" v-html=\"code_for_show.code\" style=\"margin: 20px;\"></div>\n          \n\n      </v-card>\n    </v-dialog>\n\n\n       <div class=\"title\">Список видеоматериалов</div>\n       \n       <div v-for=\"(s,idx) in list\" class='section'>\n            <div class=\"section_name\">\n                {{s.header}}\n            </div>\n            \n                <v-row>\n                    <v-col v-for=\"(v,idx) in s.child\" cols=\"12\" md=\"4\" sm=\"12\">\n                        <div><a href=\"\" @click.prevent=\"open_video(v)\">{{v.header}}</a></div>\n                        <a href=\"\" @click.prevent=\"open_video(v)\" v-if=\"!v.show\"><img :src=\"v.img\"/></a>\n                    </v-col>\n                </v-row>\n            \n\n       </div>\n       \n    </div>\n</template>\n<script>\n/*import item_content from './item_content';\nimport item_menu from './item_menu';\nimport links_block from './links'*/\nconst fix_youtube_code=(v)=>{\n    if(!v.code) return\n    let resmatch=v.code.match(/<iframe.*?src=\"(.+?)\"/)\n    if(resmatch){\n        let Id=resmatch[1].split('/').pop()\n        //console.log(Id)\n        v.img=`https://img.youtube.com/vi/${Id}/mqdefault.jpg`\n        \n        //v.code=v.code.replace(/width=\"\\d+\"/,'width=\"800\"').replace(/height=\"\\d+\"/,`height=\"600\"`) // ${window.innerHeight}\n        let size_match=v.code.match(/<iframe.*?width=\"(.+?)\".*?height=\"(.+?)\"/)\n        if(size_match){\n            let width=size_match[1]\n            let height=size_match[2]\n            let k=width/height\n            let new_width=window.innerWidth-150\n            let new_height=new_width/k\n            if(new_height > (window.innerWidth*1)-200)\n                new_height=window.innerWidth-200\n                new_width=new_height*k\n            console.log('new_height:',new_height)\n            v.code=v.code.replace(/width=\"\\d+\"/,`width=\"${new_width}\"`).replace(/height=\"\\d+\"/,`height=\"${new_height}\"`) // ${window.innerHeight}\n        }\n        //console.log(size_match)\n    }\n    else{\n        v.img=''\n    }\n\n    \n}\nexport default {\n    components:{\n    /*\n        'item-menu':item_menu,\n        'item-content':item_content,\n        'links_block':links_block\n    */\n    },\n    props:['params','is_headapp'],\n    created(){\n        this.$nextTick(\n            ()=>{\n                this.load()\n            }\n        )\n\n    },\n    data(){\n        return {\n            dialog:false,\n            code_for_show: false,\n\n            title:'',\n            \n            config:'',\n            list:[],\n            links: [],\n            log:[]\n        }\n    },\n    watch:{\n        dialog(){\n            if(!this.dialog){ // Начали просматривать видео, фиксируем\n                this.code_for_show=false\n            }\n            \n                \n        }\n    },\n    methods:{\n        open_video(v){\n            this.dialog=true\n            this.code_for_show=v\n            let interval_update_seconds=false\n            let rec_id=false\n            \n\n            let begin_show_sec=Math.floor( new Date().getTime()/1000)\n\n            this.$http.post(\n                BackendBase+'/VideoList/'+this.params.config,\n                {\n                    action: 'open_video',\n                    id: v.id\n                }\n            ).then(\n                r=>{\n                    let d=r.data\n                    if(d.success){\n                        rec_id=d.id\n                        // отравляем информацию о просмотре видео\n                        interval_update_seconds=setInterval(\n                            ()=>{\n                                    if(this.code_for_show && begin_show_sec){\n                                        \n                                        let opened_seconds=Math.floor( new Date().getTime()/1000) - begin_show_sec; //  - begin_show_sec\n                                        \n                                        this.$http.post(\n                                            BackendBase+'/VideoList/'+this.params.config,\n                                            {\n                                                action:'update_open_video',\n                                                id:rec_id,\n                                                seconds: opened_seconds // отправляем инфу о том, сколько секунд открыто окно с видео\n                                            }\n                                        )\n                                    }\n                                    else{\n                                        console.log('clear interval')\n                                        clearInterval(interval_update_seconds)\n                                    }\n\n                                \n\n                            },\n                            1000\n                        )\n                    }\n                }\n            )\n        },\n        load(){\n            this.$http.get(\n                BackendBase+'/VideoList/'+this.params.config\n            ).then(\n                r=>{\n                    let data=r.data;\n                    if(data.success){\n                        document.title=data.title, this.title=data.title\n                        for(let sect of data.list){\n                            for(let v of sect.child){\n                                v.show=false\n                                fix_youtube_code(v)\n\n\n                                \n                            }\n                            \n                        }\n                        this.list=data.list\n\n                        this.log=data.log\n                        this.links=data.links\n                    }\n                }\n            )\n        }\n    } \n}\n</script>\n<style scoped>\n\n  .is_headapp {margin: 20px; max-width: 1400px;}\n  .is_headapp h1 {margin-bottom: 20px;} \n  .v-dialog {\n      max-width: 500px;\n  }\n  .v-dialog .v-card{\n      padding: 20px;\n      max-width: 500px;\n  }\n  .title {\n    margin-bottom:  20px;\n    margin-top:  20px;\n    font-size:  36px !important;\n  }\n  .section_name {\n    background-color:  #bebebe;\n    margin-bottom:  20px;\n    margin-top:  30px;\n    border-radius:  5px;\n    padding:  10px;\n  }\n  img {max-width: 100%;}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoList.vue?vue&type=template&id=cc959222&scoped=true&\"\nimport script from \"./VideoList.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoList.vue?vue&type=style&index=0&id=cc959222&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc959222\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCol,VDialog,VIcon,VRow,VSpacer,VToolbar,VToolbarItems,VToolbarTitle})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoList.vue?vue&type=style&index=0&id=cc959222&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoList.vue?vue&type=style&index=0&id=cc959222&scoped=true&lang=css&\""],"sourceRoot":""}