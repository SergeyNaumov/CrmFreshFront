{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VGrid/VContainer.js","webpack:///./src/components/Remember.vue?eae7","webpack:///src/components/Remember.vue","webpack:///./src/components/Remember.vue?6f49","webpack:///./src/components/Remember.vue","webpack:///./src/components/Remember.vue?8874"],"names":["extend","name","functional","props","id","String","tag","type","default","fluid","Boolean","h","data","children","classes","attrs","Object","keys","filter","key","value","startsWith","domProps","staticClass","class","Array","concat","render","_vm","this","_h","$createElement","_c","_self","_v","step","show_labels","model","callback","$$v","login","expression","ref","login_ok","on","$event","remember","remember_code","check_remember_code","check_pass_ok","pass1","pass2","_s","pass_err","errors","pass_ok","change_password","_e","staticRenderFns","dialog","watch","methods","$http","post","BackendBase","then","r","D","success","test","length","password","computed","component","VApp","VBtn","VCard","VCardActions","VCardText","VCardTitle","VContainer","VTextField"],"mappings":"gHAAA,gDAMe,sBAAK,aAAaA,OAAO,CACtCC,KAAM,cACNC,YAAY,EACZC,MAAO,CACLC,GAAIC,OACJC,IAAK,CACHC,KAAMF,OACNG,QAAS,OAEXC,MAAO,CACLF,KAAMG,QACNF,SAAS,IAIb,OAAOG,GAAG,MACRR,EAAK,KACLS,EAAI,SACJC,IAEA,IAAIC,EACJ,MAAM,MACJC,GACEH,EA0BJ,OAxBIG,IAEFH,EAAKG,MAAQ,GACbD,EAAUE,OAAOC,KAAKF,GAAOG,OAAOC,IAGlC,GAAY,SAARA,EAAgB,OAAO,EAC3B,MAAMC,EAAQL,EAAMI,GAGpB,OAAIA,EAAIE,WAAW,UACjBT,EAAKG,MAAMI,GAAOC,GACX,GAGFA,GAA0B,kBAAVA,KAIvBjB,EAAMC,KACRQ,EAAKU,SAAWV,EAAKU,UAAY,GACjCV,EAAKU,SAASlB,GAAKD,EAAMC,IAGpBO,EAAER,EAAMG,IAAK,eAAUM,EAAM,CAClCW,YAAa,YACbC,MAAOC,MAAM,CACX,mBAAoBtB,EAAMM,QACzBiB,OAAOZ,GAAW,MACnBD,O,yCC5DR,IAAIc,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,cAAc,CAACA,EAAG,SAAS,CAACT,YAAY,eAAeR,MAAM,CAAC,YAAY,QAAQ,CAACiB,EAAG,eAAe,CAACT,YAAY,YAAY,CAACK,EAAIM,GAAG,2DAAsE,GAAVN,EAAIO,KAAS,CAACH,EAAG,cAAc,CAACA,EAAG,eAAe,CAACjB,MAAM,CAAC,MAAQa,EAAIQ,YAAY,YAAY,GAAG,GAAK,SAASC,MAAM,CAACjB,MAAOQ,EAAS,MAAEU,SAAS,SAAUC,GAAMX,EAAIY,MAAMD,GAAKE,WAAW,YAAY,GAAGT,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACU,IAAI,SAAS3B,MAAM,CAAC,MAAQ,UAAU,UAAYa,EAAIe,SAAS,MAAQ,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIkB,cAAc,CAAClB,EAAIM,GAAG,uBAAuB,IAAe,GAAVN,EAAIO,KAAS,CAACH,EAAG,cAAc,CAACA,EAAG,IAAI,CAACJ,EAAIM,GAAG,wIAAwIF,EAAG,eAAe,CAACjB,MAAM,CAAC,MAAQa,EAAIQ,YAAY,cAAc,GAAG,GAAK,SAASC,MAAM,CAACjB,MAAOQ,EAAiB,cAAEU,SAAS,SAAUC,GAAMX,EAAImB,cAAcR,GAAKE,WAAW,oBAAoB,GAAGT,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACU,IAAI,SAAS3B,MAAM,CAAC,MAAQ,UAAU,UAAYa,EAAImB,cAAc,MAAQ,IAAIH,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIoB,yBAAyB,CAACpB,EAAIM,GAAG,0BAA0B,IAAe,GAAVN,EAAIO,KAAS,CAACH,EAAG,cAAc,CAACA,EAAG,IAAI,CAACJ,EAAIM,GAAG,mEAAmEF,EAAG,eAAe,CAACjB,MAAM,CAAC,MAAQ,eAAe,KAAO,YAAY6B,GAAG,CAAC,MAAQhB,EAAIqB,eAAeZ,MAAM,CAACjB,MAAOQ,EAAS,MAAEU,SAAS,SAAUC,GAAMX,EAAIsB,MAAMX,GAAKE,WAAW,WAAWT,EAAG,eAAe,CAACjB,MAAM,CAAC,MAAQ,yBAAyB,KAAO,YAAY6B,GAAG,CAAC,MAAQhB,EAAIqB,eAAeZ,MAAM,CAACjB,MAAOQ,EAAS,MAAEU,SAAS,SAAUC,GAAMX,EAAIuB,MAAMZ,GAAKE,WAAW,WAAWT,EAAG,MAAM,CAACT,YAAY,OAAO,CAACK,EAAIM,GAAGN,EAAIwB,GAAGxB,EAAIyB,aAAarB,EAAG,SAAS,CAACjB,MAAM,CAAC,OAASa,EAAI0B,WAAW,GAAGtB,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACU,IAAI,SAAS3B,MAAM,CAAC,MAAQ,UAAU,UAAYa,EAAI2B,QAAQ,MAAQ,IAAIX,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAI4B,qBAAqB,CAAC5B,EAAIM,GAAG,6BAA6B,IAAe,GAAVN,EAAIO,KAAS,CAACH,EAAG,cAAc,CAACA,EAAG,IAAI,CAACJ,EAAIM,GAAG,qCAAqCF,EAAG,IAAI,CAACjB,MAAM,CAAC,KAAO,WAAW,CAACa,EAAIM,GAAG,6BAA6BF,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACU,IAAI,SAAS3B,MAAM,CAAC,MAAQ,UAAU,UAAYa,EAAI2B,QAAQ,MAAQ,IAAIX,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAI4B,qBAAqB,CAAC5B,EAAIM,GAAG,6BAA6B,IAAIN,EAAI6B,MAAM,IAAI,IAAI,IAC57EC,EAAkB,GC+DP,GACP9C,KAAM,KAAM,CACVwB,aAAY,EACZI,MAAM,GACNU,MAAM,GACNC,MAAM,GACNI,SAAQ,EACRF,SAAS,GACTN,cAAc,GACdZ,KAAK,EACL/B,GAAG,GACHuD,QAAO,EACPL,OAAO,KAET,YAaA,UAEEzB,KAAKoB,iBAEPW,MAAM,CACF,OACI/B,KAAKyB,OAAO,GACZzB,KAAKqB,MAAM,GACXrB,KAAKsB,MAAM,IAEf,QACItB,KAAKyB,OAAO,KAGpBO,QAAS,CACP,WACEhC,KAAKiC,MAAMC,KACTC,YAAY,4BACZ,CACExB,MAAMX,KAAKW,QACbyB,KACAC,IACE,IAAIC,EAAED,EAAEtD,KACLuD,EAAEC,UAASvC,KAAKM,KAAK,GACxBN,KAAKyB,OAAOa,EAAEb,UAKpB,sBACIzB,KAAKiC,MAAMC,KACPC,YAAY,8BACZ,CACIjB,cAAelB,KAAKkB,gBAE1BkB,KACEC,IACE,IAAIC,EAAED,EAAEtD,KACLuD,EAAEC,UACDvC,KAAKM,KAAK,EACVN,KAAKzB,GAAG+D,EAAE/D,OAKxB,gBAEE,GAAGyB,KAAKqB,OAASrB,KAAKsB,MAElB,GAAMtB,KAAKqB,OAASrB,KAAKsB,MACrBtB,KAAKwB,SAAS,2BAGb,GAAI,iDAAiDgB,KAAKxC,KAAKqB,OAG/D,MAAGrB,KAAKqB,MAAMoB,OAAS,GAMxB,OAFAzC,KAAK0B,SAAQ,OACb1B,KAAKwB,SAAS,IAJdxB,KAAKwB,SAAS,uDAHdxB,KAAKwB,SAAS,4CAYtBxB,KAAK0B,SAAQ,GAGf,kBACI1B,KAAKiC,MAAMC,KACPC,YAAY,4BACZ,CACI5D,GAAIyB,KAAKzB,GACT2C,cAAelB,KAAKkB,cACpBwB,SAAU1C,KAAKqB,QAErBe,KACEC,IACE,IAAIC,EAAED,EAAEtD,KACLuD,EAAEC,QAASvC,KAAKM,KAAK,EAEpBN,KAAKyB,OAAOa,EAAEb,WAM9BkB,SAAU,CACR,WAGI,OAAO,KCvL4K,I,qHCQ7LC,EAAY,eACd,EACA9C,EACA+B,GACA,EACA,KACA,KACA,MAIa,aAAAe,EAAiB,QAYhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,KAAKC,QAAA,KAAMC,aAAA,OAAaC,UAAA,OAAUC,WAAA,OAAWC,aAAA,KAAWC,aAAA,Q,yDC/B3F,yBAA0d,EAAG","file":"js/chunk-469313e7.0bbb1348.js","sourcesContent":["import \"../../../src/components/VGrid/_grid.sass\";\nimport \"../../../src/components/VGrid/VGrid.sass\";\nimport Grid from './grid';\nimport mergeData from '../../util/mergeData';\n/* @vue/component */\n\nexport default Grid('container').extend({\n  name: 'v-container',\n  functional: true,\n  props: {\n    id: String,\n    tag: {\n      type: String,\n      default: 'div'\n    },\n    fluid: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  render(h, {\n    props,\n    data,\n    children\n  }) {\n    let classes;\n    const {\n      attrs\n    } = data;\n\n    if (attrs) {\n      // reset attrs to extract utility clases like pa-3\n      data.attrs = {};\n      classes = Object.keys(attrs).filter(key => {\n        // TODO: Remove once resolved\n        // https://github.com/vuejs/vue/issues/7841\n        if (key === 'slot') return false;\n        const value = attrs[key]; // add back data attributes like data-test=\"foo\" but do not\n        // add them as classes\n\n        if (key.startsWith('data-')) {\n          data.attrs[key] = value;\n          return false;\n        }\n\n        return value || typeof value === 'string';\n      });\n    }\n\n    if (props.id) {\n      data.domProps = data.domProps || {};\n      data.domProps.id = props.id;\n    }\n\n    return h(props.tag, mergeData(data, {\n      staticClass: 'container',\n      class: Array({\n        'container--fluid': props.fluid\n      }).concat(classes || [])\n    }), children);\n  }\n\n});\n//# sourceMappingURL=VContainer.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-container',[_c('v-card',{staticClass:\"mx-auto auth\",attrs:{\"max-width\":\"344\"}},[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"\\n                Напоминание пароля \\n              \")]),(_vm.step==0)?[_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":_vm.show_labels?'Ваш логин':'',\"id\":\"login\"},model:{value:(_vm.login),callback:function ($$v) {_vm.login=$$v},expression:\"login\"}})],1),_c('v-card-actions',[_c('v-btn',{ref:\"button\",attrs:{\"color\":\"primary\",\"disabled\":!_vm.login_ok,\"small\":\"\"},on:{\"click\":function($event){return _vm.remember()}}},[_vm._v(\"Напомнить пароль\")])],1)]:(_vm.step==1)?[_c('v-card-text',[_c('p',[_vm._v(\"Мы отправили на Ваш Email код доступа для восстановления пароля. Пожалуйста, укажите его здесь, либо перейдите по ссылке из письма\")]),_c('v-text-field',{attrs:{\"label\":_vm.show_labels?'Код доступа':'',\"id\":\"login\"},model:{value:(_vm.remember_code),callback:function ($$v) {_vm.remember_code=$$v},expression:\"remember_code\"}})],1),_c('v-card-actions',[_c('v-btn',{ref:\"button\",attrs:{\"color\":\"primary\",\"disabled\":!_vm.remember_code,\"small\":\"\"},on:{\"click\":function($event){return _vm.check_remember_code()}}},[_vm._v(\"Восстановить пароль\")])],1)]:(_vm.step==2)?[_c('v-card-text',[_c('p',[_vm._v(\"Отлично, проверочный код подошёл, теперь задайте новый пароль\")]),_c('v-text-field',{attrs:{\"label\":\"Новый пароль\",\"type\":\"password\"},on:{\"keyup\":_vm.check_pass_ok},model:{value:(_vm.pass1),callback:function ($$v) {_vm.pass1=$$v},expression:\"pass1\"}}),_c('v-text-field',{attrs:{\"label\":\"Новый пароль (ещё раз)\",\"type\":\"password\"},on:{\"keyup\":_vm.check_pass_ok},model:{value:(_vm.pass2),callback:function ($$v) {_vm.pass2=$$v},expression:\"pass2\"}}),_c('div',{staticClass:\"err\"},[_vm._v(_vm._s(_vm.pass_err))]),_c('errors',{attrs:{\"errors\":_vm.errors}})],1),_c('v-card-actions',[_c('v-btn',{ref:\"button\",attrs:{\"color\":\"primary\",\"disabled\":!_vm.pass_ok,\"small\":\"\"},on:{\"click\":function($event){return _vm.change_password()}}},[_vm._v(\"Изменить старый пароль\")])],1)]:(_vm.step==3)?[_c('v-card-text',[_c('p',[_vm._v(\"Поздравляем, Ваш пароль изменён\")]),_c('a',{attrs:{\"href\":\"/login\"}},[_vm._v(\"перейти к авторизации\")])]),_c('v-card-actions',[_c('v-btn',{ref:\"button\",attrs:{\"color\":\"primary\",\"disabled\":!_vm.pass_ok,\"small\":\"\"},on:{\"click\":function($event){return _vm.change_password()}}},[_vm._v(\"Изменить старый пароль\")])],1)]:_vm._e()],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-app>\n        <v-container>\n            <v-card max-width=\"344\" class=\"mx-auto auth\">\n                \n                <v-card-title  class=\"headline\">\n                  Напоминание пароля \n                </v-card-title>\n\n                <template v-if=\"step==0\">\n                    <v-card-text>\n                    <v-text-field :label=\"show_labels?'Ваш логин':''\" v-model=\"login\"  id=\"login\"/>\n                    </v-card-text>\n                    <v-card-actions>\n                    <v-btn color=\"primary\" ref=\"button\" :disabled=\"!login_ok\" @click=\"remember()\" small>Напомнить пароль</v-btn>\n                    \n                    </v-card-actions>\n                </template>\n                <template v-else-if=\"step==1\">\n                    <v-card-text>\n                        <p>Мы отправили на Ваш Email код доступа для восстановления пароля. Пожалуйста, укажите его здесь, либо перейдите по ссылке из письма</p>\n                        <v-text-field :label=\"show_labels?'Код доступа':''\" v-model=\"remember_code\"  id=\"login\"/>\n                    </v-card-text>\n                    <v-card-actions>\n                    <v-btn color=\"primary\" ref=\"button\" :disabled=\"!remember_code\" @click=\"check_remember_code()\" small>Восстановить пароль</v-btn>\n\n                    </v-card-actions>\n                </template>\n                <template v-else-if=\"step==2\">\n                    <v-card-text>\n                        <p>Отлично, проверочный код подошёл, теперь задайте новый пароль</p>\n                        \n                        <v-text-field label=\"Новый пароль\" type=\"password\" v-model=\"pass1\" @keyup=\"check_pass_ok\" />\n                        <v-text-field label=\"Новый пароль (ещё раз)\" type=\"password\" v-model=\"pass2\" @keyup=\"check_pass_ok\" />\n                        <div class=\"err\">{{pass_err}}</div>\n                        <errors :errors=\"errors\" />\n                    </v-card-text>\n                    \n                    <v-card-actions>\n                        \n                    <v-btn color=\"primary\" ref=\"button\" :disabled=\"!pass_ok\" @click=\"change_password()\" small>Изменить старый пароль</v-btn>\n\n                    </v-card-actions>\n                </template>\n                <template v-else-if=\"step==3\">\n                    <v-card-text>\n                        <p>Поздравляем, Ваш пароль изменён</p>\n                        <a href=\"/login\">перейти к авторизации</a>\n                    </v-card-text>\n                    \n                    <v-card-actions>\n                        \n                    <v-btn color=\"primary\" ref=\"button\" :disabled=\"!pass_ok\" @click=\"change_password()\" small>Изменить старый пароль</v-btn>\n\n                    </v-card-actions>\n                </template>\n            </v-card>\n        </v-container>\n\n  </v-app>\n</template>\n\n<script>\n\nexport default {\n        data: () => ({\n          show_labels:true,\n          login:'',\n          pass1:'',\n          pass2:'',\n          pass_ok:false,\n          pass_err:'', // сообщение об ошибке а-ля \"пароли не совпадают\"\n          remember_code:'',\n          step:0,\n          id:'',\n          dialog:true,\n          errors:[]\n        }),\n        mounted () {\n/*            setTimeout(\n               ()=>{ // для того, чтобы не было глюков с автоподстановкой логина и пароля при отображении\n                \n                  let l=document.querySelectorAll('.auth label');\n                  l[0].classList.add('v-label--active');\n                  l[1].classList.add('v-label--active');\n                  document.getElementById('login').focus();\n               },1\n\n            )*/\n        },\n\n        created(){\n            // убрать, для теста\n          this.check_pass_ok()\n        },\n        watch:{\n            step(){\n                this.errors=[]\n                this.pass1=''\n                this.pass2=''\n            },\n            login(){\n                this.errors=[]\n            },\n        },\n        methods: {\n          remember(){ // получаем проверочный код\n            this.$http.post(\n              BackendBase+'/remember/get-access-code',\n              {\n                login:this.login              }\n            ).then(\n              r=>{\n                let D=r.data\n                if(D.success) this.step=1\n                this.errors=D.errors\n                \n              }\n            )\n          },\n          check_remember_code(){ // проверяем, есть ли такой код в системе\n              this.$http.post(\n                  BackendBase+'/remember/check-access-code',\n                  {\n                      remember_code: this.remember_code\n                  }\n              ).then(\n                  r=>{\n                    let D=r.data\n                    if(D.success){\n                        this.step=2\n                        this.id=D.id\n                    }\n                  }\n              )\n          },\n          check_pass_ok(){\n              \n            if(this.pass1 && this.pass2){\n                \n                if( !(this.pass1 == this.pass2) ){\n                    this.pass_err='пароли не совпадают'\n                    \n                }\n                else if(!/^[a-zA-Z0-9\\.\\-#@\\!%\\^,\\?;\\]\\[\\{\\}\\(\\)\\s\\*&]+$/.test(this.pass1)){ // !@#\\-\\.\\$%\\^&*\\(\\)\n                    this.pass_err='недопустимые символы, проверьте раскладку'\n                }\n                else if(this.pass1.length < 8){\n                    this.pass_err='длина пароля не должна быть менее 8-ми символов'\n                }\n                else{\n                    this.pass_ok=true\n                    this.pass_err=''\n                    return\n                }\n                \n            }\n            this.pass_ok=false\n\n          },\n          change_password(){\n              this.$http.post(\n                  BackendBase+'/remember/change-password',\n                  {\n                      id: this.id,\n                      remember_code: this.remember_code,\n                      password: this.pass1\n                  }\n              ).then(\n                  r=>{\n                    let D=r.data\n                    if(D.success) this.step=3\n                    else\n                        this.errors=D.errors\n                  }\n              )\n          }\n        },\n\n        computed: {\n          login_ok(){\n              // нет никакой необходимости проверять на email, поскольку логин может быть любым\n              \n              return true\n              //return /^[a-zA-Z0-9\\-_\\.]+@[a-zA-Z0-9\\-_\\.]+\\.[a-zA-Z0-9\\-_\\.]+$/.test(this.login)\n          }\n        }\n}\n</script>\n<style scope>\n  .auth .err{ color: red; background-color: white;}\n  body {margin-top: 10%;}\n</style>\n\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remember.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remember.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Remember.vue?vue&type=template&id=40727d8e&\"\nimport script from \"./Remember.vue?vue&type=script&lang=js&\"\nexport * from \"./Remember.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Remember.vue?vue&type=style&index=0&scope=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VApp,VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VTextField})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remember.vue?vue&type=style&index=0&scope=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Remember.vue?vue&type=style&index=0&scope=true&lang=css&\""],"sourceRoot":""}