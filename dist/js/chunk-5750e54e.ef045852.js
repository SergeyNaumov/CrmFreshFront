(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5750e54e"],{"2cc4":function(e,o,t){"use strict";var a=t("3ffc"),r=t.n(a);r.a},"2fa4":function(e,o,t){"use strict";t("20f6");var a=t("80d2");o["a"]=Object(a["i"])("spacer","div","v-spacer")},"3ffc":function(e,o,t){},fa23:function(e,o,t){"use strict";t.r(o);var a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("div",[t("b",[e._v("Наименование:")]),e._v(e._s(e.comp.header))]),t("div",[t("b",[e._v("Юридический адрес:")]),e._v(" "+e._s(e.comp.ur_address?e.comp.ur_address:"не указан"))]),t("div",[t("b",[e._v("ИНН:")]),e._v(" "+e._s(e.comp.inn?e.comp.inn:"не указан"))]),t("div",[t("b",[e._v("Телефон:")]),e._v(" "+e._s(e.comp.phone?e.comp.phone:"не указан"))]),t("div",[t("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-datails":"",label:"Уведомлять о подписке аптек"},on:{change:e.subscribe_change},model:{value:e.comp.subscribe,callback:function(o){e.$set(e.comp,"subscribe",o)},expression:"comp.subscribe"}}),t("v-btn",{staticClass:"tooltip_subscribe",attrs:{color:"primary",dark:"","x-small":""},on:{click:function(o){e.tooltip_show=!e.tooltip_show}}},[e._v("?")]),t("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"390"},model:{value:e.tooltip_show,callback:function(o){e.tooltip_show=o},expression:"tooltip_show"}},[t("v-card",[t("v-card-title",[e._v("Уведомлять о подписке аптек")]),t("v-card-text",[e._v("\n              возможность аптеками выразить желание на участие в маркетинговой акции, уведомления приходят на вашу электронную почту\n            ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",text:""},on:{click:function(o){e.tooltip_show=!1}}},[e._v("\n                ok\n              ")])],1)],1)],1)],1),e.comp.more?e._e():[t("br"),e._v(" "),t("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(o){return o.preventDefault(),e.show()}}},[e._v("Изменить данные юридического лица")])],e.comp_local.more?t("v-card",{staticStyle:{"margin-top":"10px"}},[t("v-card-title",[t("div",[e._v("\n                    Заявка на изменение сведений о юридическом лице"),t("br"),t("small",[e._v(e._s(e.comp.header))])])]),t("v-card-text",[e.success?[t("p",[e._v("Ваша заявка успешно отправлена!")]),t("v-btn",{ref:"button",attrs:{color:"primary",small:""},on:{click:function(o){e.success=e.success_off()}}},[e._v("Закрыть")]),e._v(" \n                ")]:[t("v-text-field",{attrs:{label:"Наименование","error-messages":e.error.header},on:{keyup:e.check_data},model:{value:e.comp_local.header,callback:function(o){e.$set(e.comp_local,"header",o)},expression:"comp_local.header"}}),t("v-text-field",{attrs:{label:"ИНН","error-messages":e.error.inn},on:{keyup:e.check_data},model:{value:e.comp_local.inn,callback:function(o){e.$set(e.comp_local,"inn",o)},expression:"comp_local.inn"}}),t("v-text-field",{attrs:{label:"Юридический адрес","error-messages":e.error.ur_address},on:{keyup:e.check_data},model:{value:e.comp_local.ur_address,callback:function(o){e.$set(e.comp_local,"ur_address",o)},expression:"comp_local.ur_address"}}),t("v-text-field",{attrs:{label:"Телефон","error-messages":e.error.phone},on:{keyup:e.check_data},model:{value:e.phone,callback:function(o){e.phone=o},expression:"phone"}}),t("v-text-field",{attrs:{label:"Email для оповещений","error-messages":e.error.email_for_notify},on:{keyup:e.check_data},model:{value:e.comp_local.email_for_notify,callback:function(o){e.$set(e.comp_local,"email_for_notify",o)},expression:"comp_local.email_for_notify"}})],t("errors",{attrs:{errors:e.errors}})],2),e.success?e._e():t("v-card-actions",[[t("v-btn",{ref:"button",attrs:{color:"primary",disabled:e.disable_change,small:""},on:{click:function(o){return e.send_order()}}},[e._v("Отправить заявку")]),e._v(" \n              \n            ")],t("v-btn",{ref:"button",attrs:{color:"red",small:""},on:{click:function(o){return e.hide()}}},[e._v("Отменить")])],2)],1):e._e()],2)},r=[],c=t("4bb9"),s={props:["comp","set_comp","your_manager","get_reg_data"],created(){this.copy_comp_to_local(),this.check_data()},watch:{comp(){this.copy_comp_to_local()},phone(){this.phone=Object(c["e"])(this.phone),this.comp_local.phone=this.phone}},data(){return{comp_local:{id:"",header:"",ur_address:"",inn:"",email_for_notify:"",phone:"",more:!1},phone:"",success:!1,errors:[],disable_change:!1,error:{header:"",inn:"",phone:"",email:"",ur_address:""},tooltip_show:!1}},computed:{data_ok(){for(let e in this.error)if(this.error[f])return!1;return!0}},methods:{copy_comp_to_local(){for(let e in this.comp)this.comp_local[e]=this.comp[e];this.phone=this.comp.phone},success_off(){this.success=!1,this.hide(),this.get_reg_data()},check_data(){this.disable_change=!1;for(let e in this.error)this.error[e]="";if(!this.comp_local.ur_address){let e="Укажите юридический адрес";this.error["ur_address"]=e,this.disable_change=!0}if(!/^(\d{10}|\d{12})?$/.test(this.comp_local.inn)){let e="В ИНН должно быть 10 или 12 цифр";this.error["inn"]=e,this.disable_change=!0}if(this.comp_local.email_for_notify&&!Object(c["a"])(this.comp_local.email_for_notify)){let e="Электронный адрес не валиден";this.error["email_for_notify"]=e,this.disable_change=!0}},show(){this.comp_local.more=!0,this.set_comp(this.comp_local)},hide(){this.comp_local.more=!1,this.set_comp(this.comp_local)},subscribe_change(){this.$http.get(BackendBase+"/anna/change-on-notify/"+this.comp.id+"/"+(this.comp.subscribe?1:0))},send_order(){let e=this.comp_local;this.$http.post(BackendBase+"/anna/change-comp-order",{comp_id:e.id,header:e.header,inn:e.inn,phone:e.phone,email_for_notify:e.email_for_notify,ur_address:e.ur_address,on_notify:e.on_notify?1:0}).then(e=>{let o=e.data;o.success&&(this.success=!0),this.errors=o.errors})}}},i=s,n=(t("2cc4"),t("2877")),l=t("6544"),_=t.n(l),d=t("8336"),p=t("b0af"),h=t("99d9"),m=t("ac7c"),u=t("169a"),v=t("2fa4"),b=t("8654"),k=Object(n["a"])(i,a,r,!1,null,"017062ed",null);o["default"]=k.exports;_()(k,{VBtn:d["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCheckbox:m["a"],VDialog:u["a"],VSpacer:v["a"],VTextField:b["a"]})}}]);
//# sourceMappingURL=chunk-5750e54e.ef045852.js.map