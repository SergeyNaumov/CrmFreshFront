(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d043b2a","chunk-4cf437bf"],{"0903":function(e,t,a){"use strict";var i=a("a40c"),s=a.n(i);s.a},"17b3":function(e,t,a){},"1a2e":function(e,t,a){"use strict";var i=a("2da8"),s=a.n(i);s.a},"1de0":function(e,t,a){"use strict";var i=a("c474"),s=a.n(i);s.a},"1dfd":function(e,t,a){},2227:function(e,t,a){"use strict";var i=a("c7d5"),s=a.n(i);s.a},"23a7":function(e,t,a){"use strict";a("5803");var i=a("2677"),s=a("cc20"),l=a("80d2"),r=a("d9bd"),n=a("d9f7");t["a"]=i["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:e=>{return"boolean"===typeof e||[1e3,1024].includes(e)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:e=>{return Object(l["B"])(e).every(e=>null!=e&&"object"===typeof e)}}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const e=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);const t=this.internalArrayValue.reduce((e,{size:t=0})=>{return e+t},0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(l["s"])(t,1024===this.base))},internalArrayValue(){return Object(l["B"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.isFocused&&this.hasLabel?this.internalArrayValue.map(e=>{const{name:t="",size:a=0}=e,i=this.truncateText(t);return this.showSize?`${i} (${Object(l["s"])(a,1024===this.base)})`:i}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(e){!0===e&&Object(r["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(e){const t=this.multiple?e:e?[e]:[];Object(l["j"])(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((e,t)=>this.$createElement(s["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const e=this.internalValue;e.splice(t,1),this.internalValue=e}}},[e])):[]},genControl(){const e=i["a"].options.methods.genControl.call(this);return this.hideInput&&(e.data.style=Object(n["c"])(e.data.style,{display:"none"})),e},genInput(){const e=i["a"].options.methods.genInput.call(this);return e.data.attrs.multiple=this.multiple,delete e.data.domProps.value,delete e.data.on.input,e.data.on.change=this.onInput,[this.genSelections(),e]},genPrependSlot(){if(!this.prependIcon)return null;const e=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[e])},genSelectionText(){const e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections(){const e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((t,a)=>{this.$scopedSlots.selection&&e.push(this.$scopedSlots.selection({text:this.text[a],file:t,index:a}))}):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot(){const e=i["a"].options.methods.genTextFieldSlot.call(this);return e.data.on={...e.data.on||{},click:()=>this.$refs.input.click()},e},onInput(e){const t=[...e.target.files||[]];this.internalValue=this.multiple?t:t[0],this.initialValue=this.internalValue},onKeyDown(e){this.$emit("keydown",e)},truncateText(e){if(e.length<Number(this.truncateLength))return e;const t=Math.floor((Number(this.truncateLength)-1)/2);return`${e.slice(0,t)}…${e.slice(e.length-t)}`}}})},2677:function(e,t,a){"use strict";var i=a("8654");t["a"]=i["a"]},"2da8":function(e,t,a){},5803:function(e,t,a){},"5dd9":function(e,t,a){"use strict";var i=a("1dfd"),s=a.n(i);s.a},"624d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.results.log?a("div",["string"==typeof e.results.log?a("pre",{domProps:{textContent:e._s(e.results.log)}}):e._l(e.results.log,(function(t,i){return a("pre",{key:"l"+i},[e._v(e._s(t))])}))],2):e._e(),e.explain_query?a("div",{domProps:{innerHTML:e._s(e.sql_format(e.explain_query))}}):e._e(),a("v-dialog",{attrs:{"max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.dialog_header))]),a("v-card-text",[e._v("\n          "+e._s(e.dialog_body)+"\n          "),e.log.length?[a("b",[e._v("обратитесь к разработчику: ")]),e._l(e.log,(function(t){return a("pre",{key:t.index,domProps:{textContent:e._s(t)}})}))]:e._e(),e.errors.length?[a("ul",{staticClass:"errors"},e._l(e.errors,(function(t){return a("li",{key:t.idx},[e._v(e._s(t))])})),0)]:e._e()],2),"delete_dialog"==e.dialog_type?a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){return e.delete_element()}}},[e._v("Да")]),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialog=!1,e.dialog_type=""}}},[e._v("Нет")])],1):a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.dialog=!1,e.dialog_type=""}}},[e._v("Ок")])],1)],1)],1),e.results.headers?a("div",{staticClass:"mt-5 text-left",attrs:{sm12:"",md12:"",lg12:""}},[e._l(e.out_before_search,(function(t,i){return a("div",{key:i,domProps:{innerHTML:e._s(t)}})})),e.not_out_result_search?e._e():[e.results.count_total?[a("div",{staticClass:"text-xs-left"},[a("u",[e._v("Найдено записей: "+e._s(e.results.count_total))])]),a("div",{staticClass:"text-xs-left"},[e.results.count_pages>1?a("v-pagination",{attrs:{length:e.results.count_pages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()],1),a("div",{staticClass:"results_wrap"},[e.results.output?a("table",{staticClass:"results"},[a("thead",[a("tr",{staticClass:"header"},[e._l(e.results.headers,(function(t){return a("th",{key:t.head_idx},[a("span",{domProps:{innerHTML:e._s(t.h)}}),t.make_sort?a("span",{staticClass:"sort_button"},[a("a",{staticClass:"sort_desc",class:{bold:"desc"==t.sorted},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.go_search(e.page,{priority_sort:[t.n,"asc"]})}}},[a("v-icon",{attrs:{color:"green",small:""}},[e._v("keyboard_arrow_down")])],1),a("a",{staticClass:"sort_asc",class:{bold:"asc"==t.sorted},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.go_search(e.page,{priority_sort:[t.n,"desc"]})}}},[a("v-icon",{attrs:{color:"red",small:""}},[e._v("keyboard_arrow_up")])],1)]):e._e()])})),!e.permissions.not_edit||e.permissions.make_delete?a("th",{staticClass:"controls"}):e._e()],2)]),a("tbody",e._l(e.results.output,(function(t){return a("tr",{key:t.tr_index},[e._l(t.data,(function(i,s){return a("td",{key:i.td_index,attrs:{"data-label":e.results.headers[s]["h"]+":"}},[a("div",{staticClass:"field"},["object"==typeof i.value?[i.value.before_html?a("div",{domProps:{innerHTML:e._s(i.value.before_html)}}):e._e(),"file_uploader"==i.value.type?a("res-file-uploader",{attrs:{opt:i.value}}):"form"==i.value.type?a("res-form",{attrs:{opt:i.value}}):e._e(),i.value.after_html?a("div",{domProps:{innerHTML:e._s(i.value.after_html)}}):e._e()]:"html"==i.type?[a("span",{domProps:{innerHTML:e._s(i.value)}})]:"text"==i.type?[e._v("\n                                      \n                                    "+e._s(i)+"\n                                      "),a("v-text-field",{staticClass:"change_in_search",on:{input:function(a){return e.change_in_search(t,i)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"td.value"}}),a("div",{staticClass:"saved",attrs:{id:i.name+"_"+t.key}}),a("div",{staticClass:"err",attrs:{id:i.name+"_"+t.key+"_err"}})]:"font-awesome"==i.type?[a("v-icon",[e._v(e._s(i.value))])]:"textarea"==i.type?[a("v-textarea",{attrs:{"auto-grow":!0,clearable:!0},on:{input:function(a){return e.change_in_search(t,i)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"td.value"}}),a("div",{staticClass:"saved",attrs:{id:i.name+"_"+t.key}}),a("div",{staticClass:"err",attrs:{id:i.name+"_"+t.key+"_err"}})]:"select"==i.type?[a("v-select",{attrs:{items:e.results.selects[i.name],"item-value":"v","item-text":"d"},on:{change:function(a){return e.change_in_search(t,i)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"td.value"}}),a("div",{staticClass:"saved",attrs:{id:i.name+"_"+t.key}}),a("div",{staticClass:"err",attrs:{id:i.name+"_"+t.key+"_err"}})]:"checkbox"==i.type||"switch"==i.type?a("div",{staticStyle:{"text-align":"center"}},[a("v-checkbox",{attrs:{"hide-details":"",row:""},on:{change:function(a){return e.change_in_search(t,i)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"td.value"}}),a("div",{staticClass:"saved",attrs:{id:i.name+"_"+t.key}}),a("div",{staticClass:"err",attrs:{id:i.name+"_"+t.key+"_err"}})],1):e._e(),"date"==i.type?[a("field-date",{staticStyle:{width:"200px"},attrs:{field:i,form:{read_only:0},parent:function(a){i.value=a,e.change_in_search(t,i)}}}),a("div",{staticClass:"saved",attrs:{id:i.name+"_"+t.key}}),a("div",{staticClass:"err",attrs:{id:i.name+"_"+t.key+"_err"}})]:e._e(),"datetime"==i.type?[e._v("[datetime]")]:e._e(),"yearmon"==i.type?[e._v("[yearmon]")]:e._e(),"memo"==i.type?a("field-memo",{attrs:{form_id:t.key,form:{config:e.results.config},field:{name:i.name}}}):e._e(),"multiconnect"==i.type?[i.value?e._l(i.value.split(/,/),(function(t){return a("v-chip",{key:t.value,staticClass:"ma-2",attrs:{color:"primary"}},[e._v(e._s(t))])})):e._e()]:e._e()],2)])})),!e.permissions.not_edit||e.permissions.make_delete?a("td",{staticClass:"text-xs-left text-md-right controls"},[e.permissions.not_edit?e._e():a("v-btn",{attrs:{small:""},on:{click:function(a){return e.go_to_edit(t.key)}}},[a("a",{attrs:{href:"/edit_form/"+e.results.config+"/"+t.key},on:{click:function(a){return a.preventDefault(),e.go_to_edit(t.key)}}},[a("v-icon",{attrs:{color:"primary",small:""}},[e._v("edit")])],1)]),e._v(" \n                                "),e.permissions.make_delete?a("v-btn",{attrs:{small:""},on:{click:function(a){return e.delete_dialog(t.key)}}},[a("v-icon",{attrs:{small:"",color:"primary",icon:""}},[e._v("delete")])],1):e._e()],1):e._e()],2)})),0)]):e._e()]),e.results.count_pages>1?a("div",{staticClass:"text-xs-left"},[a("v-pagination",{attrs:{length:e.results.count_pages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1):e._e()]:e.finding?e._e():[a("p",[e._v("По Вашему запросу ничего не найдено ")])]],e._l(e.out_after_search,(function(t,i){return a("div",{key:i,domProps:{innerHTML:e._s(t)}})}))],2):e._e()],1)},s=[],l=a("8c2c"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.errors.length?a("pre",[e._v("            "+e._s(e.errors)+"\n        ")]):e._e(),e.value?a("div",[e._v("\n            "+e._s(e.value)+" "),a("a",{attrs:{href:e.download_link,target:"_blank"}},[e._v("скачать")])]):e._e(),a("input",{attrs:{type:"file",id:this.id},on:{change:function(t){return e.upload()}}})])},n=[],o={props:["opt"],data(){return{value:"",errors:[],id:""}},computed:{download_link(){return this.opt.filedir.replace(/^\./,"")+"/"+this.value}},mounted(){this.id="result_uploader_"+this.opt.id+"_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),this.value=opt.value},methods:{upload(){let e=document.getElementById(this.id).files[0],t=new FileReader;t.readAsDataURL(e),t.onload=t=>{let a=t.target.result;this.$http.post(BackendBase+"/edit-form/"+this.opt.config+"/"+this.opt.id,{action:"upload_file",name:this.opt.name,value:{orig_name:e.name,src:a}}).then(e=>{let t=e.data;this.errors=t.errors,t.success&&(this.value=t.value)})}}}},c=o,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,"cfdd357a",null),_=d.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:e.opt.style},[e.errors.length?a("pre",[e._v("            "+e._s(e.errors)+"\n        ")]):e._e(),e.opt.spoiler&&!e.show?a("div",{staticClass:"spoiler",on:{click:function(t){t.preventDefault(),e.show=!0}}},[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){t.preventDefault(),e.show=!0}}},[e._v(e._s(e.opt.spoiler))])],1):e._e(),a("v-dialog",{staticClass:"dialog",attrs:{"max-width":"500"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.opt.title))]),a("v-card-text",[e.success?a("div",{staticClass:"success"},[a("p",[e._v("Ваша заявка была успешно отправлена")]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.show=!1,e.success=!1}}},[e._v("ок")])],1)]):a("form",{attrs:{enctype:"multipart/form-data",method:"post",action:e.opt.url,target:e.iframe_name,id:e.form_id},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[e._l(e.fields,(function(t){return["file"==t.type?a("div",{staticClass:"row"},[a("v-file-input",{attrs:{label:t.description,id:t.id},on:{change:function(a){return e.attach_file(t)}}})],1):"text"==t.type?a("div",{staticClass:"row"},[a("v-text-field",{attrs:{label:t.description,name:t.name},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"f.value"}})],1):"textarea"==t.type?a("div",{staticClass:"row"},[a("v-textarea",{attrs:{label:t.description},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"f.value"}})],1):e._e(),e.form_errors[t.name]?a("div",{staticClass:"err"},[e._v("\n                                "+e._s(e.form_errors[t.name])+"\n                            ")]):e._e()]})),a("v-btn",{attrs:{small:""},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("отправить")])],2)])],1)],1)],1)},f=[],v={props:["opt"],data(){return{iframe_name:"",form_id:"",value:"",show:!1,fields:[],success:!1,errors:[],form_errors:{}}},watch:{},computed:{},mounted(){this.init()},methods:{init(){this.iframe_name="resform_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,4),this.form_id="resform_id_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,4),this.fields=this.opt.fields,this.show=!this.opt.spoiler;for(let e of this.fields)"file"==e.type&&(e.id="attach_"+this.opt.id+"_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,12))},attach_file(e){let t=document.getElementById(e.id).files[0];console.log(t);let a=new FileReader;a.readAsDataURL(t),a.onload=a=>{let i=a.target.result;e.value={orig_name:t.name,src:i}}},submit(){let e={};for(let t of this.fields)e[t.name]="value"in t?t.value:"";console.log("send_data:",e),this.$http.post(this.opt.url,e).then(e=>{let t=e.data;this.success=t.success,this.errors=t.errors,this.form_errors=t.form_errors})}}},p=v,m=(a("fdc9"),a("6544")),g=a.n(m),b=a("8336"),y=a("b0af"),x=a("99d9"),k=a("169a"),w=a("23a7"),C=a("8654"),S=a("a844"),$=Object(u["a"])(p,h,f,!1,null,"774b0c7e",null),V=$.exports;g()($,{VBtn:b["a"],VCard:y["a"],VCardText:x["b"],VCardTitle:x["c"],VDialog:k["a"],VFileInput:w["a"],VTextField:C["a"],VTextarea:S["a"]});var D={components:{"field-memo":l["default"],"res-file-uploader":_,"res-form":V},props:["results","permissions","go_search","finding","SearchDataSet","fields","explain_query","out_before_search","out_after_search","not_out_result_search","last_search_params"],data(){return{page:1,cur_str:!1,show_memo_form:!1,dialog:!1,dialog_header:"Удаление элемента",dialog_body:"Вы действительно хотите удалить элемент?",dialog_type:"",delete_id:!1,log:[],errors:[]}},watch:{page(e){this.go_search(e,this.last_search_params)},dialog(){this.dialog||(this.errors=[])},SearchDataSet(){this.page=this.SearchDataSet.page}},computed:{is_show_add_memo(){return this.CUR_STR.show_form}},methods:{parent_for_change_in_search(e,t,a){t.value=a,this.change_in_search(e,t)},sql_format(e){return e?(e=e.replace(/\s\s+/gm," "),e=e.replace(/(WHERE|FROM|GROUP\s+BY|ORDER\s+BY|LIMIT)\s+/gi,"<br>$1 "),e=e.replace(/((LEFT )?JOIN)/gim,"<br>$1"),e=e.replace(/(SELECT|FROM)/gi,"$1<br>"),e=e.replace(/([a-zA-Z0-9\(\)\s\._]{1,30},)/gim,"$1 "),e=e.replace(/(([a-zA-Z0-9\(\)\s\._]{1,50},){3})/gim,"&nbsp;&nbsp;$1<br>"),e=e.replace(/(\b(SELECT|FROM|LEFT|JOIN|GROUP|ORDER|BY|ON|LIMIT|WHERE|LIKE|IN|OR|AND|NOT|as)\b)/gim,'<span style="color: blue;">$1</span>'),e):1},toggle_memo_add(e){this.cur_str!=e?(this.cur_str=e,this.show_memo_form=!0):this.show_memo_form=!this.show_memo_form},go_to_edit(e){let t="",a=this.results.config;t=this.results.card_format&&"vue"==this.results.card_format?"/edit_form/"+a+"/"+e:"/edit_form.pl?config="+a+"&action=edit&id="+e,window.open(t)},delete_dialog(e){this.dialog=!0,this.dialog_type="delete_dialog",this.delete_id=e,this.dialog_body="Вы действительно хотите удалить элемент?"},delete_element(){this.$http.get(BackendBase+"/delete-element/"+this.results.config+"/"+this.delete_id).then(e=>{let t=e.data;if(this.dialog=!1,this.dialog_type="",this.dialog_header="Удаление ",this.dialog=!0,t.success){this.dialog_body="Операция прошла успешно";let e=[];for(let t of this.results.output)t.key!=this.delete_id&&e.push(t);this.results.count_total--,this.delete_id=!1,this.results.output=e,setTimeout(()=>{this.dialog=!1},700)}else this.dialog_body="При удалении возникли ошибки",this.errors=t.errors;this.log=t.log})},change_in_search(e,t){t.before_saved||(t.before_saved=!0,setTimeout(()=>{t.before_saved=!1},600),setTimeout(()=>{0==t.before_saved&&this.save_in_search(e,t)},601))},get_field_by_name(e){let t=this.results.query_fields;if(t.length)for(let a of t)if(a.name==e)return a},save_in_search(e,t){let a=t.value,i=e.key;"checkbox"==t.type&&(a=a?1:0);let s={};s[t.name]=a;let l=BackendBase+"/edit-form/"+this.results.config+"/"+i;this.$http.post(l,{id:i,action:"update",values:s}).then(a=>{let i=a.data;if(i.success){let a=document.getElementById(t.name+"_"+e.key);a.innerHTML="Сохранено",setTimeout((function(){a.innerHTML=""}),500)}if(i.errors.length){let a=document.getElementById(t.name+"_"+e.key+"_err");a.innerHTML=i.errors.join("<br>"),setTimeout(()=>{a.innerHTML=""},1500)}})}}},T=D,E=(a("0903"),a("ac7c")),O=a("cc20"),L=a("132d"),R=(a("17b3"),a("9d26")),I=a("dc22"),B=a("a9ad"),F=a("de2c"),j=a("7560"),M=a("58df"),H=Object(M["a"])(B["a"],Object(F["a"])({onVisible:["init"]}),j["a"]).extend({name:"v-pagination",directives:{Resize:I["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:e=>e%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const e=parseInt(this.totalVisible,10);if(0===e)return[];const t=Math.min(Math.max(0,e)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=t)return this.range(1,this.length);const a=t%2===0?1:0,i=Math.floor(t/2),s=this.length-i+1+a;if(this.value>i&&this.value<s){const e=1,t=this.length,s=this.value-i+2,l=this.value+i-2-a,r=s-1===e+1?2:"...",n=l+1===t-1?l+1:"...";return[1,r,...this.range(s,l),n,this.length]}if(this.value===i){const e=this.value+i-1-a;return[...this.range(1,e),"...",this.length]}if(this.value===s){const e=this.value-i+1;return[1,"...",...this.range(e,this.length)]}return[...this.range(1,i),"...",...this.range(s,this.length)]}},watch:{value(){this.init()}},mounted(){this.init()},methods:{init(){this.selected=null,this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const e=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((e-96)/42)},next(e){e.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(e){e.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(e,t){const a=[];e=e>0?e:1;for(let i=e;i<=t;i++)a.push(i);return a},genIcon(e,t,a,i,s){return e("li",[e("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":a},attrs:{disabled:a,type:"button","aria-label":s},on:a?{}:{click:i}},[e(R["a"],[t])])])},genItem(e,t){const a=t===this.value&&(this.color||"primary"),i=t===this.value,s=i?this.currentPageAriaLabel:this.pageAriaLabel;return e("button",this.setBackgroundColor(a,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":t===this.value},attrs:{type:"button","aria-current":i,"aria-label":this.$vuetify.lang.t(s,t)},on:{click:()=>this.$emit("input",t)}}),[t.toString()])},genItems(e){return this.items.map((t,a)=>{return e("li",{key:a},[isNaN(Number(t))?e("span",{class:"v-pagination__more"},[t.toString()]):this.genItem(e,t)])})},genList(e,t){return e("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},t)}},render(e){const t=[this.genIcon(e,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(e),this.genIcon(e,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return e("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(e,t)])}}),P=a("b974"),A=Object(u["a"])(T,i,s,!1,null,null,null);t["a"]=A.exports;g()(A,{VBtn:b["a"],VCard:y["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCheckbox:E["a"],VChip:O["a"],VDialog:k["a"],VIcon:L["a"],VPagination:H,VSelect:P["a"],VTextField:C["a"],VTextarea:S["a"]})},"66d3":function(e,t,a){},"7cb6":function(e,t,a){},"7fe1":function(e,t,a){},8293:function(e,t,a){"use strict";var i=a("a459"),s=a.n(i);s.a},8651:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:"",md7:"",lg7:"","offset-lg1":"","offset-md1":""}},[a("v-card",[a("v-toolbar",{on:{click:function(t){return e.toggle_filters()}}},[a("v-app-bar-nav-icon",{attrs:{color:"primary"}}),a("v-subheader",[e._v("Используемые фильтры")])],1)],1),a("form",{attrs:{autocomplete:"new-password"},on:{submit:function(t){return t.preventDefault(),e.go_search(1)}}},[a("draggable",{directives:[{name:"show",rawName:"v-show",value:e.SHOW_FILTERS_on,expression:"SHOW_FILTERS_on"}],attrs:{options:{handle:".drag_area"},list:e.filter_list}},e._l(e.filter_list,(function(t){return a("div",{key:t.name},[a("div",{staticClass:"drag_area"},[a("v-icon",[e._v("fa-arrows-alt-v")])],1),a("v-card",{staticClass:"pa-2 mt-0 mb-3 onfilter",attrs:{outlined:!0}},[e.dynamic_component(t)?a("div",{staticStyle:{}},[a(e.dynamic_component(t),{tag:"component",attrs:{field:t,config:e.config,filter_change:e.filter_change,filters_values:e.filters_values,refresh:e.refresh}})],1):e._e()])],1)})),0)],1)],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.field.range?[a("div",{staticClass:"description"},[e._v(e._s(e.field.description)+":")]),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{"prepend-icon":"done",label:"От","hide-details":"",clearable:""},model:{value:e.field.value_low,callback:function(t){e.$set(e.field,"value_low",t)},expression:"field.value_low"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{"prepend-icon":"done_all",label:"До","hide-details":"",clearable:""},model:{value:e.field.value_hi,callback:function(t){e.$set(e.field,"value_hi",t)},expression:"field.value_hi"}})],1)]:[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:e.field.description,clearable:"","hide-details":""},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})]],2)},r=[],n={props:["field"],wathch:{field(){}},data(){return{}}},o=n,c=(a("2227"),a("2877")),u=a("6544"),d=a.n(u),_=a("0e8f"),h=a("8654"),f=Object(c["a"])(o,l,r,!1,null,"ed84e9f8",null),v=f.exports;d()(f,{VFlex:_["a"],VTextField:h["a"]});var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[[a("v-text-field",{staticClass:"input-group--focused",attrs:{label:e.field.description,clearable:"","hide-details":""},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})]],2)},m=[],g={props:["field"],data(){return{}}},b=g,y=Object(c["a"])(b,p,m,!1,null,"3da7dd8b",null),x=y.exports;d()(y,{VTextField:h["a"]});var k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.field.filter_type&&"checkbox"==e.field.filter_type?[a("v-checkbox",{attrs:{label:e.field.description,"hide-details":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:e.field.range?[e._v("\n        "+e._s(e.field.name)+" select filter range пока не реализован\n    ")]:[e.field.autocomplete?[a("v-autocomplete",{attrs:{label:e.field.description,multiple:e.field.multiple,items:e.values,"item-value":"v","item-text":"d","search-input":e.search,"no-data-text":e.no_data_text,clearable:"",loading:e.loading,"hide-details":"",multiple:"",chips:"",id:"filter_"+e.field.name,autocomplete:"new-password"},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},focus:e.focus_autocomplete},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:e.field.values.length>10?[a("v-autocomplete",{attrs:{label:e.field.description,items:e.values,"item-value":"v","item-text":"d","no-data-text":e.no_data_text,"cache-items":"",clearable:"",multiple:"",chips:"","hide-details":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:[a("v-select",{attrs:{label:e.field.description,items:e.values,"item-value":"v","item-text":"d",multiple:"",chips:"","no-data-text":e.no_data_text,"cache-items":"",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]]],2)},w=[],C={props:["field","config","filter_change","filters_values","refresh"],data(){return{value:[],values:[],search:"",loading:!1}},created(){let e=this.field.value;this.values=this.field.values,this.field.filter_type&&this.field.filter_type,"string"==typeof e&&(e=[e]),this.value=e,this.field.autocomplete&&this.field.autocomplete_start_loaded&&this.load_autocomplete("")},watch:{refresh(){this.value=[]},search(){this.load_autocomplete()},value(e){let t=this.field;t.value=this.value,this.filter_change(t)}},computed:{no_data_text(){return this.search?"ничего не найдено":"введите часть наименования"}},methods:{focus_autocomplete(){this.field.depend_filter&&this.load_autocomplete()},load_autocomplete(){let e={term:this.search,action:"get_list",field_name:this.field.name,values:this.value};this.field.depend_filter&&(e.filters_values=this.filters_values),this.$http.post(BackendBase+"/autocomplete/"+this.config,e).then(e=>{let t=e.data;t.success&&(this.values=t.list)}).catch(e=>{alert(e)})}}},S=C,$=a("c6a6"),V=a("ac7c"),D=a("b974"),T=Object(c["a"])(S,k,w,!1,null,"fdc93f1e",null),E=T.exports;d()(T,{VAutocomplete:$["a"],VCheckbox:V["a"],VSelect:D["a"]});var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"description"},[e._v(e._s(e.field.description)+":")]),a("v-flex",{attrs:{xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"",readonly:"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:"С","prepend-icon":"event",readonly:"",clearable:""},model:{value:e.field.registered_low,callback:function(t){e.$set(e.field,"registered_low",t)},expression:"field.registered_low"}},i))]}}]),model:{value:e.menu_from,callback:function(t){e.menu_from=t},expression:"menu_from"}},[a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ru-Ru"},model:{value:e.field.registered_low,callback:function(t){e.$set(e.field,"registered_low",t)},expression:"field.registered_low"}})],1),a("v-menu",{attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"",readonly:"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:"По","prepend-icon":"event",readonly:"",clearable:""},model:{value:e.field.registered_hi,callback:function(t){e.$set(e.field,"registered_hi",t)},expression:"field.registered_hi"}},i))]}}]),model:{value:e.menu_to,callback:function(t){e.menu_to=t},expression:"menu_to"}},[a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ru-Ru"},model:{value:e.field.registered_hi,callback:function(t){e.$set(e.field,"registered_hi",t)},expression:"field.registered_hi"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"текст комментария",clearable:""},model:{value:e.field.message,callback:function(t){e.$set(e.field,"message",t)},expression:"field.message"}})],1),a("v-flex",{attrs:{xs12:""}},[e._e(),a("v-autocomplete",{attrs:{label:"Комментарий оставил",items:e.field.users,"item-value":"v","item-text":"d",multiple:"",autocomplete:e.field.users.length>10,clearable:""},model:{value:e.field.user_id,callback:function(t){e.$set(e.field,"user_id",t)},expression:"field.user_id"}})],1)],1)],1)},L=[],R={props:["field"],data(){return{menu_from:!1,menu_to:!1}}},I=R,B=(a("869d"),a("2e4b")),F=a("e449"),j=Object(c["a"])(I,O,L,!1,null,"aaf794c6",null),M=j.exports;d()(j,{VAutocomplete:$["a"],VDatePicker:B["a"],VFlex:_["a"],VMenu:F["a"],VSelect:D["a"],VTextField:h["a"]});var H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"description"},[e._v(e._s(e.field.description)+":")]),e.field.range?[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"pl-3":"",md6:"",xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"",readonly:"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({staticStyle:{"max-width":"250px"},attrs:{label:"C","prepend-icon":"event",readonly:"",clearable:""},model:{value:e.show_dat_value0,callback:function(t){e.show_dat_value0=t},expression:"show_dat_value0"}},i))]}}],null,!1,2950323751),model:{value:e.menu[0],callback:function(t){e.$set(e.menu,0,t)},expression:"menu[0]"}},[a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ru-Ru"},on:{input:function(t){return e.select_cal(0)}},model:{value:e.dat_value0,callback:function(t){e.dat_value0=t},expression:"dat_value0"}})],1)],1),a("v-flex",{attrs:{"pl-3":"",md6:"",xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"",readonly:"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({staticStyle:{"max-width":"250px"},attrs:{label:"По","prepend-icon":"event",readonly:"",clearable:""},model:{value:e.show_dat_value1,callback:function(t){e.show_dat_value1=t},expression:"show_dat_value1"}},i))]}}],null,!1,1520960708),model:{value:e.menu[1],callback:function(t){e.$set(e.menu,1,t)},expression:"menu[1]"}},[a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ru-Ru"},on:{input:function(t){return e.select_cal(1)}},model:{value:e.dat_value1,callback:function(t){e.dat_value1=t},expression:"dat_value1"}})],1)],1),e.err_select?a("v-flex",{staticClass:"err_select",attrs:{"pl-3":"",md12:"",xs12:""}},[e._v("\n                дата начала периода больше даты его окончания\n            ")]):e._e()],1)]:void 0],2)},P=[],A={props:["field","filter_change"],mounted(){this.init_filter()},computed:{err_select(){return!!(this.dat_value0&&this.dat_value1&&this.dat_value0.split(/-/).join("")>this.dat_value1.split(/-/).join(""))}},data(){return{dat_value0:"",dat_value1:"",show_dat_value0:"",show_dat_value1:"",menu:[!1,!1],modal:[!1,!1],need_empty:[!1,!1]}},watch:{field(){this.init_filter()},show_dat_value0(){this.show_dat_value0||(this.dat_value0="")},show_dat_value1(){this.show_dat_value1||(this.dat_value1="")},dat_value0(){let e=this.field;e.value_low=this.dat_value0,this.filter_change(e),this.show_dat_value0=this.dat_value0.split("-").reverse().join(".")},dat_value1(){let e=this.field;e.value_hi=this.dat_value1,this.filter_change(e),this.show_dat_value1=this.dat_value1.split("-").reverse().join(".")}},methods:{init_filter(){let e=this.field;console.log("value:",e.value),"value"in e&&(e.value.length||(this.dat_value0="",this.dat_value1=""),e.value.length>0&&(this.dat_value0=e.value[0]),e.value.length>1&&(this.dat_value1=e.value[1]))},select_cal(e){this.menu[e]=!1,this.set_need_empty(),0==e?this.field.value_low=this.dat_value0:this.field.value_hi=this.dat_value1},clear(e){this.field.value="",this.select_cal(e)},set_need_empty:function(){this.need_empty=!(this.field.read_only||!this.field.value)}}},W=A,z=(a("fe88"),a("a722")),q=Object(c["a"])(W,H,P,!1,null,"22136916",null),N=q.exports;d()(q,{VDatePicker:B["a"],VFlex:_["a"],VLayout:z["a"],VMenu:F["a"],VTextField:h["a"]});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[void e.field.range],2)},K=[],J={props:["field"],data(){return{}}},Y=J,G=Object(c["a"])(Y,U,K,!1,null,null,null),Z=G.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"description"},[e._v(e._s(e.field.description)+":")]),e.field.range?[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"pl-3":"",md6:"",xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"",readonly:"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({staticStyle:{"max-width":"250px"},attrs:{label:"С","prepend-icon":"event",readonly:"",clearable:""},on:{click:function(t){e.show_time[0]=!1}},model:{value:e.field.value_low,callback:function(t){e.$set(e.field,"value_low",t)},expression:"field.value_low"}},i))]}}],null,!1,4067525923),model:{value:e.menu[0],callback:function(t){e.$set(e.menu,0,t)},expression:"menu[0]"}},[e.show_time[0]?e._e():a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ru-Ru"},on:{input:function(t){return e.select_dat(0)}},model:{value:e.dat_value0,callback:function(t){e.dat_value0=t},expression:"dat_value0"}}),e.show_time[0]?a("v-time-picker",{attrs:{format:"24hr"},on:{input:function(t){return e.select_cal(0)}},model:{value:e.time_value0,callback:function(t){e.time_value0=t},expression:"time_value0"}}):e._e()],1)],1),a("v-flex",{attrs:{"pl-3":"",md6:"",xs12:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"",readonly:"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({staticStyle:{"max-width":"250px"},attrs:{label:"По","prepend-icon":"event",readonly:"",clearable:""},on:{click:function(t){e.show_time[1]=!1}},model:{value:e.field.value_hi,callback:function(t){e.$set(e.field,"value_hi",t)},expression:"field.value_hi"}},i))]}}],null,!1,3158940375),model:{value:e.menu[1],callback:function(t){e.$set(e.menu,1,t)},expression:"menu[1]"}},[e.show_time[1]?e._e():a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ru-Ru"},on:{input:function(t){return e.select_dat(1)}},model:{value:e.dat_value1,callback:function(t){e.dat_value1=t},expression:"dat_value1"}}),e.show_time[1]?a("v-time-picker",{attrs:{format:"24hr"},on:{input:function(t){return e.select_cal(1)}},model:{value:e.time_value1,callback:function(t){e.time_value1=t},expression:"time_value1"}}):e._e()],1)],1),e.err_select?a("v-flex",{staticClass:"err_select",attrs:{"pl-3":"",md12:"",xs12:""}},[e._v("\n                дата начала периода больше даты его окончания\n            ")]):e._e()],1)]:void 0],2)},X=[],ee={props:["field","filter_change"],computed:{err_select(){return!!(this.dat_value0&&this.dat_value1&&this.dat_value0.split(/-/).join("")>this.dat_value1.split(/-/).join(""))}},data(){return{dat_value0:"",dat_value1:"",time_value0:"",time_value1:"",menu:[!1,!1],show_time:[!1,!1],modal:[!1,!1],need_empty:[!1,!1]}},watch:{},methods:{select_cal(e){let t=this.field;this.menu[e]=!1,this.set_need_empty(),0==e?(this.field.value_low=this.dat_value0+" "+this.time_value0+":00",t.value_low=this.field.value_low):(this.field.value_hi=this.dat_value1+" "+this.time_value1+":59",t.value_hi=this.field.value_hi),this.filter_change(t)},select_dat(e){this.show_time[e]=!0,0==e?this.time_value0="":this.time_value1=""},select_time(e){this.show_time[e]=!1},clear(e){this.field.value="",this.select_cal(e)},set_need_empty:function(){this.need_empty=!(this.field.read_only||!this.field.value)}}},te=ee,ae=(a("1a2e"),a("c964")),ie=Object(c["a"])(te,Q,X,!1,null,"9da5a698",null),se=ie.exports;d()(ie,{VDatePicker:B["a"],VFlex:_["a"],VLayout:z["a"],VMenu:F["a"],VTextField:h["a"],VTimePicker:ae["a"]});var le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e.values.length<20?a("v-select",{staticClass:"input-group--focused",attrs:{items:e.values,"item-value":"v","item-text":"d","no-data-text":"значения не выбраны",hint:"Выберите одно или несколько значений","single-line":"",descriprion:"выберите значения",multiple:"",label:e.field.description,chips:"",clearable:""},on:{change:e.change},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):a("v-autocomplete",{staticClass:"input-group--focused",attrs:{items:e.values,"item-value":"v","item-text":"d","no-data-text":"значения не выбраны",hint:"Выберите одно или несколько значений","single-line":"",descriprion:"выберите значения",label:e.field.description,multiple:"",chips:"",clearable:""},on:{change:e.change},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._l(e.errors,(function(t,i){return a("div",{key:"err"+i,staticClass:"err"},[e._v(e._s(t))])}))],2)])},re=[],ne={props:["config","field","filter_change"],computed:{},data(){return{value:[],values:[],errors:[]}},created(){this.value=this.field.value,this.field.autocomplete||this.$http.post(BackendBase+"/multiconnect/"+this.config+"/"+this.field.name,{action:"get"}).then(e=>{let t=e.data;if(t.success)for(let a of t.list)this.values.push({v:a.id+"",d:a.header})})},methods:{change(){let e=this.field;e.value=this.value,this.filter_change(e)}}},oe=ne,ce=(a("5dd9"),Object(c["a"])(oe,le,re,!1,null,"604604d6",null)),ue=ce.exports;d()(ce,{VAutocomplete:$["a"],VSelect:D["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"description"},[e._v(e._s(e.field.description)+":")]),e.field.range?[a("div",{staticClass:"description"},[e._v("От:")]),a("v-flex",{attrs:{xs6:""}},[a("v-row",[a("v-col",[a("v-select",{attrs:{label:"Месяц",items:e.mon_items,"item-value":"v","item-text":"d"},on:{change:e.set_value},model:{value:e.mon_from,callback:function(t){e.mon_from=t},expression:"mon_from"}})],1),a("v-col",[a("v-select",{staticClass:"year",attrs:{label:"Год",items:e.year_items},on:{change:e.set_value},model:{value:e.year_from,callback:function(t){e.year_from=t},expression:"year_from"}})],1),a("v-col",{staticClass:"reset_link"},[e.year_from||e.mon_from?a("small",[a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.reset(0)}}},[e._v("сбросить")])]):e._e()])],1)],1),a("div",{staticClass:"description"},[e._v("До:")]),a("v-flex",{attrs:{xs6:""}},[a("v-row",[a("v-col",{attrs:{"md-2":""}},[a("v-select",{attrs:{label:"Месяц",items:e.mon_items,"item-value":"v","item-text":"d"},on:{change:e.set_value},model:{value:e.mon_to,callback:function(t){e.mon_to=t},expression:"mon_to"}})],1),a("v-col",{attrs:{"md-2":""}},[a("v-select",{staticClass:"year",attrs:{label:"Год",items:e.year_items},on:{change:e.set_value},model:{value:e.year_to,callback:function(t){e.year_to=t},expression:"year_to"}})],1),a("v-col",{staticClass:"reset_link",attrs:{"md-1":""}},[e.year_to||e.mon_to?a("small",[a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.reset(1)}}},[e._v("сбросить")])]):e._e()])],1)],1)]:[a("v-container",[a("v-row",[a("v-col",[a("v-select",{attrs:{label:"Месяц",items:e.mon_items,"item-value":"v","item-text":"d"},model:{value:e.mon,callback:function(t){e.mon=t},expression:"mon"}})],1),a("v-col",[a("v-select",{staticClass:"year",attrs:{label:"Год",items:e.year_items},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1)],1)],1),e.year||e.mon?a("div",[a("small",[a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.reset(t)}}},[e._v("сбросить")])])]):e._e()]],2)},_e=[],he={props:["field","filter_change"],data(){return{year_values:[],mon_items:[{v:"01",d:"Январь"},{v:"02",d:"Февраль"},{v:"03",d:"Март"},{v:"04",d:"Апрель"},{v:"05",d:"Май"},{v:"06",d:"Июнь"},{v:"07",d:"Июль"},{v:"08",d:"Август"},{v:"09",d:"Сертябрь"},{v:"10",d:"Октябрь"},{v:"11",d:"Ноябрь"},{v:"12",d:"Декабрь"}],value:"",year_items:[],year:"",mon:"",value2:["",""],year_from:"",year_to:"",mon_from:"",mon_to:""}},created(){let e,t=this.field,a=(new Date).getFullYear();e=t.max_year&&t.max_year>a?e:a+3;while(a<=e)this.year_items.push(a),a++},watch:{year(){this.set_value()},mon(){this.set_value()}},methods:{set_value(){let e=this.field;"range"==e.filter_type?(this.year_from&&this.mon_from?this.value2[0]=this.year_from+"-"+this.mon_from:this.value2[0]="",this.year_to&&this.mon_to?this.value2[1]=this.year_to+"-"+this.mon_to:this.value2[1]="",e.value_low=this.value2[0],e.value_hi=this.value2[1],this.filter_change(e)):this.year&&this.mon&&(this.value=this.year+"-"+this.mon,e.value=this.value,this.filter_change(e))},reset(e){"range"==this.field.filter_type?(0==e&&(this.year_from="",this.mon_from=""),1==e&&(this.year_to="",this.mon_to=""),this.set_value()):(this.year="",this.mon="")}}},fe=he,ve=(a("9d9b"),a("62ad")),pe=a("a523"),me=a("0fd9"),ge=Object(c["a"])(fe,de,_e,!1,null,"70084f98",null),be=ge.exports;d()(ge,{VCol:ve["a"],VContainer:pe["a"],VFlex:_["a"],VRow:me["a"],VSelect:D["a"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[[a("v-select",{attrs:{label:e.field.description,items:e.values,"item-value":"v","item-text":"d","cache-items":"",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]],2)},xe=[],ke={props:["field","filter_change"],data(){return{values:[{v:0,d:"искать всё"},{v:1,d:"файл существует"},{v:2,d:"файл отсутствует"}],value:0}},watch:{value(e){let t=this.field;t.value=this.value,this.filter_change(t)}}},we=ke,Ce=(a("8293"),Object(c["a"])(we,ye,xe,!1,null,"b71d7ea4",null)),Se=Ce.exports;d()(Ce,{VSelect:D["a"]});var $e={components:{"filter-text":v,"filter-select":E,"filter-date":N,"filter-time":Z,"filter-datetime":se,"filter-yearmon":be,"filter-memo":M,"filter-multiconnect":ue,"filter-in_ext_url":x,"filter-file":Se},props:["config","filters","on_filters","filter_change","SHOW_FILTERS_on","toggle_filters","ORDER","filters_values"],data(){return{refresh:0,filter_list:[],autocomplete_search:"",autocomplete_loading:!1,aucocomplete_current:{}}},created(){this.filter_list=this.on_filters},watch:{config(){this.refresh=Math.random()},on_filters(){this.filter_list=this.on_filters},ORDER(){this.filter_list=this.on_filters}},computed:{},methods:{set_aucocomplete_current(e){var t=this.autocomplete_search;t&&t!=e.old_search&&(e.old_search=t,this.$http.get(e.source+"?config="+this.config+"&field="+e.name+"&term="+t).then(t=>{e.values=t.data}).catch(e=>{alert("Error: "+e)}))},dynamic_component(e){let t="";switch(e.type){case"text":case"textarea":case"wysiwyg":t="filter-text";break;case"checkbox":case"switch":t="filter-checkbox";break;case"file":case"select":case"date":case"datetime":case"yearmon":case"memo":case"in_ext_url":case"multiconnect":t="filter-"+e.type;break;default:t=""}return t},search(){}}},Ve=$e,De=(a("1de0"),a("5bc1")),Te=a("b0af"),Ee=a("132d"),Oe=a("e0c7"),Le=a("71d9"),Re=Object(c["a"])(Ve,i,s,!1,null,"29a8ed22",null);t["a"]=Re.exports;d()(Re,{VAppBarNavIcon:De["a"],VCard:Te["a"],VFlex:_["a"],VIcon:Ee["a"],VSubheader:Oe["a"],VToolbar:Le["a"]})},"869d":function(e,t,a){"use strict";var i=a("a173"),s=a.n(i);s.a},"8c2c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.errors.length?a("errors",{attrs:{errors:e.errors}}):e._e(),e.id?[e.loading?a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):[a("v-card",{staticClass:"memo",class:{is_in_results:e.is_in_results}},[e.data.length?e._e():a("div",[e._v("\n              пусто\n            ")]),e._l(e.data,(function(t,i){return a("div",{key:t.idl},[t.edit_on?a("div",{staticClass:"edit_on"},[a("v-textarea",{attrs:{rows:1,label:"Измените комментарий:","auto-grow":!0,clearable:!0,autofocus:!0},model:{value:t.message,callback:function(a){e.$set(t,"message",a)},expression:"l.message"}}),a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(a){return e.update(t)}}},[e._v("Внести изменения")]),a("v-btn",{attrs:{color:"red",small:""},on:{click:function(a){return e.edit(t,!1)}}},[e._v("Отмена")])],1):a("div",{staticClass:"memo_item"},[a("div",{staticClass:"date",style:t.style},[e._v(e._s(t.date))]),a("div",{staticClass:"user_name",style:t.style},[e._v(e._s(t.user_name)+":")]),a("div",{staticClass:"message",domProps:{innerHTML:e._s(e.to_html(t.message))}}),e.field.make_delete?a("v-icon",{attrs:{small:""},on:{click:function(a){return e.edit(t,!0)}}},[e._v("edit")]):e._e(),e.field.make_delete?a("v-icon",{attrs:{small:""},on:{click:function(a){return e.del(t,i)}}},[e._v("delete")]):e._e()],1)])}))],2),e.form.read_only||e.field.read_only?e._e():[e.view_adding_block?e._e():a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){e.view_adding_block=1}}},[e._v("Новый комментарий")]),e.view_adding_block?a("div",{staticClass:"adding_block pt-1"},[a("v-textarea",{attrs:{rows:1,label:"Введите комментарий","auto-grow":!0,clearable:!0,autofocus:!0},model:{value:e.adding_value,callback:function(t){e.adding_value=t},expression:"adding_value"}}),a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){return e.add()}}},[e._v("Сохранить")]),a("v-btn",{attrs:{color:"red",small:""},on:{click:function(t){e.view_adding_block=!1}}},[e._v("Отмена")])],1):e._e()]]]:[e._v("\n    добавлять комментарии будет возможно после создания основной карты\n  ")]],2)},s=[],l=(a("56d7"),{data:function(){return{loading:!1,adding_value:"",view_adding_block:!1,user_color:{},colors:["#009688","#673AB7","#9C27B0","#3F51B5","#607D8B","#1B5E20","#004D40"],data:[],errors:[],id:!1}},props:["form","field","form_id"],mounted(){this.form_id&&(this.id=this.form_id),this.form&&!this.id&&this.form.id&&(this.id=this.form.id),this.init()},computed:{},methods:{init(){this.id&&this.$http.get(BackendBase+"/memo/get/"+this.form.config+"/"+this.field.name+"/"+this.id).then(e=>{let t=e.data;this.data=t.data,t.field.description||(t.field.description=""),this.errors=t.errors,this.colored(),this.loading=!1}).catch(e=>{this.errors=["error get memo: "+e]})},is_in_results(){return!!this.form_id},colored(){let e={},t=0;for(let a of this.data){let i;null==a.user_id&&(a.user_id=-1,a.user_name="<не известно>"),e[a.user_id]||(e[a.user_id]=this.colors[t],t++),i=e[a.user_id],a.style={color:i}}},add(){this.$http.post(BackendBase+"/memo/add/"+this.form.config+"/"+this.field.name+"/"+this.id,{message:this.adding_value}).then(e=>{let t=e.data;if(t.success&&t.memo_id){let e={id:t.memo_id,message:this.adding_value,user_name:t.user_name,user_id:t.user_id,date:t.now};this.field.reverse?this.data.unshift(e):this.data.push(e),this.adding_value="",this.colored()}this.errors=t.errors,this.hide_timeout_errors()})},hide_timeout_errors(){setTimeout(()=>{this.errors=[]},1e3)},update(e){this.edit(e,!1),this.$http.post(BackendBase+"/memo/update/"+this.form.config+"/"+this.field.name+"/"+this.id+"/"+e.id,{message:e.message}).then(t=>{let a=t.data;a.success&&(e.date=a.now,e.user_name=a.user_name,e.user_id=a.user_id,this.colored())})},edit(e,t){var a=[];e.edit_on=t;for(let i of this.data)a.push(i);this.data=a},del(e,t){this.$http.get(BackendBase+"/memo/delete/"+this.form.config+"/"+this.field.name+"/"+this.id+"/"+e.id).then(e=>{let a=e.data;a.success&&(this.data.splice(t,1),this.colored())})},to_html(e){return e?(e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/\n/g,"<br>"),e):""}},watch:{form_id(){this.id!=this.form_id&&(this.id=this.form_id,this.init())}}}),r=l,n=(a("d2cb"),a("2877")),o=a("6544"),c=a.n(o),u=a("8336"),d=a("b0af"),_=a("132d"),h=a("490a"),f=a("a844"),v=Object(n["a"])(r,i,s,!1,null,"72b2e823",null);t["default"]=v.exports;c()(v,{VBtn:u["a"],VCard:d["a"],VIcon:_["a"],VProgressCircular:h["a"],VTextarea:f["a"]})},"9d9b":function(e,t,a){"use strict";var i=a("ed3f"),s=a.n(i);s.a},a04d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"is_headapp"},[a("h1",[e._v(e._s(e.title))]),e.permissions.make_create?a("div",[a("v-icon",{staticClass:"small",attrs:{color:"primary"},on:{click:function(t){return e.new_card()}}},[e._v("fa-plus")]),e._v(" \n          "),a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.new_card()}}},[e._v("Добавить")])],1):e._e(),e._e(),e.search_plugin?a("div",{staticClass:"search_plugin"},e._l(e.search_plugin,(function(t,i){return a("div",{key:"sp"+i},[a("v-icon",{attrs:{color:"primary"}},[e._v(e._s(t.icon))]),a("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),e.go_search_plugin(t.name)}}},[e._v(e._s(t.title))])],1)})),0):e._e(),e.errors.length?a("div",{staticClass:"errors"},[e._l(e.errors,(function(t){return[a("div",{key:t,staticClass:"error"},[a("v-icon",{attrs:{color:"primary"}},[e._v("fa fa-bomb")]),a("span",{domProps:{innerHTML:e._s(t)}})],1)]}))],2):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"mt-2 mb-2",attrs:{xs12:"",lg12:""}},[e._e(),e._e(),a("v-flex",{staticClass:"mt-2 mb-2",attrs:{xs12:"",lg12:""}},[[a("div",{staticClass:"links"},e._l(e.search_links,(function(t){return a("div",{key:t.link},[a("a",{attrs:{href:t.link,target:t.target}},[e._v(e._s(t.description))])])})),0),e.log?a("div",{staticClass:"log"},["string"==typeof e.log?a("pre",[e._v(e._s(e.log))]):e._l(e.log,(function(t,i){return a("pre",{key:"log"+i},[e._v(e._s(t))])}))],2):e._e(),e.before_filters_html?a("div",{staticClass:"before_filters_html"},["string"==typeof e.before_filters_html?a("div",{domProps:{innerHTML:e._s(e.before_filters_html)}}):e._l(e.before_filters_html,(function(t){return a("div",{key:t.i,domProps:{innerHTML:e._s(t)}})}))],2):e._e()]],2)],1),e.show_find_button_top?[a("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.on_filters&&e.on_filters.length,expression:"on_filters && on_filters.length"}],attrs:{xs12:"",lg12:""}},[a("v-btn",{attrs:{color:"primary",small:"",href:"",id:"search_results"},on:{click:function(t){return t.preventDefault(),e.go_search(1)}}},[a("v-icon",{staticClass:"small"},[e._v(" fa fa-search")]),e._v(" искать")],1)],1)]:e._e(),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.SHOW_FILTERS,expression:"SHOW_FILTERS"}],staticClass:"mb-2 filters",attrs:{xs12:"",sm12:"",md4:"",lg4:""}},[a("v-toolbar",{on:{click:function(t){e.SHOW_FILTERS_all=!e.SHOW_FILTERS_all}}},[a("v-app-bar-nav-icon",{attrs:{color:"primary"}}),a("v-subheader",[e._v("Фильтры")])],1),e.SHOW_FILTERS_all&&e.filters_groups.length?a("div",e._l(e.filters_groups,(function(t,i){return a("div",{key:t.description,staticClass:"filters_groups"},[a("a",{attrs:{href:"#",color:"primary"},on:{click:function(t){t.preventDefault(),e.filters_groups[i].on=!e.filters_groups[i].on}}},[e._v(e._s(t.description))]),e._l(t.child,(function(i){return[t.on?a("div",{key:i.i,staticClass:"filter_block"},[a("v-checkbox",{attrs:{"hide-details":"",small:"",color:"primary",label:e.filters[i]["description"]},on:{change:function(t){return e.filter_toggle(e.filters[i])}},model:{value:e.filters[i]["filter_on"],callback:function(t){e.$set(e.filters[i],"filter_on",t)},expression:"filters[cid]['filter_on']"}})],1):e._e()]}))],2)})),0):e.SHOW_FILTERS_all?a("div",{staticClass:"filters_list"},e._l(e.filters,(function(t){return a("v-checkbox",{key:t.name,staticClass:"filter_block",attrs:{"hide-details":"",color:"primary",label:t.description},on:{change:function(a){return e.filter_toggle(t)}},model:{value:t.filter_on,callback:function(a){e.$set(t,"filter_on",a)},expression:"f.filter_on"}})})),1):e._e()],1),a("on-filters",{attrs:{filters:e.filters,config:e.params.config,go_search:e.go_search,on_filters:e.on_filters,filter_change:e.filter_change,toggle_filters:e.toggle_filters,SHOW_FILTERS_on:e.SHOW_FILTERS_on,ORDER:e.ORDER,filters_values:e.filters_values}}),e.show_find_button_top?e._e():[a("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.on_filters&&e.on_filters.length,expression:"on_filters && on_filters.length"}],attrs:{xs12:"",lg12:""}},[a("v-btn",{attrs:{color:"primary",small:"",href:"",id:"search_results"},on:{click:function(t){return t.preventDefault(),e.go_search(1)}}},[a("v-icon",{staticClass:"small"},[e._v(" fa fa-search")]),e._v(" искать")],1)],1)],a("v-flex",{staticClass:"mt-1",attrs:{md12:""}},[e.finding?a("v-progress-linear",{attrs:{color:"primary",indeterminate:"",rounded:"",height:"6"}}):e._e(),e.errors_find&&e.errors_find.length?a("div",{staticClass:"errors_find"},[a("h2",[e._v("Произошли ошибки при поиске")]),e._l(e.errors_find,(function(t){return a("div",{key:t,staticStyle:{color:"red"}},[e._v(e._s(t))])})),a("p",[a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.go_search()}}},[e._v("повторить попытку поиска")])])],2):[a("hr"),e.plugin_out?a("div",{staticClass:"plugin_out",domProps:{innerHTML:e._s(e.plugin_out)}}):a("find-results",{attrs:{results:e.results,permissions:e.permissions,go_search:e.go_search,finding:e.finding,SearchDataSet:e.SearchDataSet,filters:e.filters,explain_query:e.explain_query,out_before_search:e.out_before_search,out_after_search:e.out_after_search,not_out_result_search:e.not_out_result_search,last_search_params:e.last_search_params}})]],2)],2)],1)},s=[],l=a("ce01"),r=l["a"],n=(a("de38"),a("2877")),o=a("6544"),c=a.n(o),u=a("5bc1"),d=a("8336"),_=a("ac7c"),h=a("0e8f"),f=a("132d"),v=a("a722"),p=a("8e36"),m=a("e0c7"),g=a("71d9"),b=Object(n["a"])(r,i,s,!1,null,null,null);t["default"]=b.exports;c()(b,{VAppBarNavIcon:u["a"],VBtn:d["a"],VCheckbox:_["a"],VFlex:h["a"],VIcon:f["a"],VLayout:v["a"],VProgressLinear:p["a"],VSubheader:m["a"],VToolbar:g["a"]})},a173:function(e,t,a){},a40c:function(e,t,a){},a459:function(e,t,a){},a523:function(e,t,a){"use strict";a("20f6"),a("4b85");var i=a("e8f2"),s=a("d9f7");t["a"]=Object(i["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(e,{props:t,data:a,children:i}){let l;const{attrs:r}=a;return r&&(a.attrs={},l=Object.keys(r).filter(e=>{if("slot"===e)return!1;const t=r[e];return e.startsWith("data-")?(a.attrs[e]=t,!1):t||"string"===typeof t})),t.id&&(a.domProps=a.domProps||{},a.domProps.id=t.id),e(t.tag,Object(s["a"])(a,{staticClass:"container",class:Array({"container--fluid":t.fluid}).concat(l||[])}),i)}})},be78:function(e,t,a){},c474:function(e,t,a){},c7d5:function(e,t,a){},ce01:function(module,__webpack_exports__,__webpack_require__){"use strict";var _AdminTable_OnFilters__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8651"),_AdminTable_FindResults__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("624d");__webpack_exports__["a"]={name:"admin-table",components:{"on-filters":_AdminTable_OnFilters__WEBPACK_IMPORTED_MODULE_0__["a"],"find-results":_AdminTable_FindResults__WEBPACK_IMPORTED_MODULE_1__["a"]},props:["params","is_headapp"],data(){return{show_find_button_top:!1,filters:[],filters_groups:[],on_filters:[],permissions:{make_create:!1,make_delete:!1,not_edit:!0},search_links:[],ORDER:1,SHOW_FILTERS:!0,SHOW_FILTERS_on:!0,SHOW_FILTERS_all:!0,title:"",log:[],errors:[],errors_find:[],before_filters_html:"",finding:!1,SearchDataSet:{page:0,query:{}},search_plugin:[],javascript:{},results:{headers:[{h:""}],output:[{data:[{value:[]}]}]},plugin_out:"",explain_query:"",out_before_search:[],out_after_search:[],not_out_result_search:"",last_search_params:{}}},created(){this.Init()},watch:{params(e){e.config&&this.Init()}},computed:{filters_values(){let e={};for(let t of this.on_filters)"value"in t&&t.value&&("object"==typeof t.value?t.value.length&&(e[t.name]=t.value):e[t.name]=t.value);return e}},methods:{get_on_filters(){let e=[];for(let t of this.filters)"filter_on"in t&&t.filter_on&&e.push(t);this.on_filters=e.sort((function(e,t){return e.order>t.order?1:-1}))},init_on_filters(e){if(!e)for(let t of this.filters)t.filter_on&&this.ORDER++;if(e&&e.length){for(let t of e){let e=this.get_filter_by_name(t.name);e&&(e.filter_on=!0,e.order=this.ORDER++,t.value&&(e.value=t.value))}this.get_on_filters()}},Init(){this.SHOW_FILTERS=!0,this.SHOW_FILTERS_on=!0,this.SHOW_FILTERS_all=!0,this.filters_groups=[],this.$http.get(BackendBase+"/get-filters/"+this.params.config).then(response=>{let D=response.data;if(this.results={},this.errors=D.errors,D.success){document.title=this.title=D.title,this.log=D.log,this.permissions=D.permissions,this.search_plugin=D.search_plugin,this.show_find_button_top=D.show_find_button_top;for(let e of D.filters)"checkbox"!=e.type&&"switch"!=e.type||e.values||(e.values=[{v:1,d:"Да"},{v:0,d:"Нет"}],e.type="select",e.not_multiple=!0,e.value||(e.value=[]));if(this.filters=D.filters,this.search_links=D.search_links,D.javascript&&eval(D.javascript),D.filters_groups&&D.filters_groups.length&&(this.filters_groups=D.filters_groups),this.before_filters_html=D.before_filters_html,!D.on_filters.length)for(let e of D.filters)if(e.filter_on){let t="";e.type in["select"]?(t=[],"string"==typeof e.value?t.push(e.value):e.value&&(t=e.value)):t=e.value,D.on_filters.push({name:e.name,value:t})}this.init_on_filters(D.on_filters),D.search_on_load&&this.go_search(1)}else document.title=this.title="Ошибка при обработке конфига "+this.params.config+"!",this.errors=D.errors,this.errors.length||(this.errors=["произошла непредвиденная ошибка. обратитесь к разработчику"])}).catch(e=>{alert("!!"+e)})},filter_toggle(e){e.filter_on&&(e.order=this.ORDER),this.filters=this.filters,this.init_on_filters(),this.get_on_filters(),this.ORDER++},get_query(){let e=[];for(let t of this.on_filters)t.range?e.push([t.name,[t.value_low,t.value_hi]]):"memo"==t.type?e.push([t.name,{registered_low:t.registered_low,registered_hi:t.registered_hi,message:t.message,user_id:t.user_id}]):e.push([t.name,t.value?t.value:""]);return e},go_search_plugin(e,t){let a=this.get_query();t||(t={}),this.$http.post(BackendBase+"/get-result",{config:this.params.config,plugin:e,query:a,params:t}).then(e=>{let t=e.data;this.finding=!1,t.success&&t.ready&&("html"==t.format?(console.log({d:t}),this.plugin_out=t.result):"xls"==t.format||(t.format="png")),this.errors_find=t.errors}).catch(e=>{this.errors_find=["ошибка: "+e],this.finding=!1})},go_search(page,params){this.results={headers:[{h:""}],output:[{data:[{value:[]}]}]},this.plugin_out="",this.last_search_params=params,this.SHOW_FILTERS_all=!1,this.SHOW_FILTERS_on=!1;let q=this.get_query(),method,url;params||(params={}),this.errors_find=[],this.finding=!0,this.SearchDataSet={page:page,query:q},this.$http({url:BackendBase+"/get-result",method:"post",data:{page:page,query:q,config:this.params.config,params:params}}).then(r=>{let d=r.data;this.explain_query=d.explain_query,this.results=d.results,this.out_before_search=d.out_before_search,this.not_out_result_search=d.not_out_result_search,this.errors_find=d.errors,this.out_after_search=d.out_after_search,this.finding=!1,d.javascript&&this.$nextTick(()=>{eval(d.javascript)})}).catch(e=>{this.errors_find=["ошибка: "+e],this.finding=!1})},new_card(){window.open("/edit_form/"+this.params.config)},filter_change(e){for(let t of this.on_filters)if(t.name==e.name){t=e;break}},toggle_filters(){this.SHOW_FILTERS_on=!this.SHOW_FILTERS_on},get_filter_by_name(e){for(let t of this.filters)if(t.name==e)return t}}}},d2cb:function(e,t,a){"use strict";var i=a("7fe1"),s=a.n(i);s.a},de38:function(e,t,a){"use strict";var i=a("be78"),s=a.n(i);s.a},ed3f:function(e,t,a){},fdc9:function(e,t,a){"use strict";var i=a("7cb6"),s=a.n(i);s.a},fe88:function(e,t,a){"use strict";var i=a("66d3"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-5d043b2a.6fc6c055.js.map