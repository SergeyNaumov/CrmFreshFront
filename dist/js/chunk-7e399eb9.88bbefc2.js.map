{"version":3,"sources":["webpack:///./src/components/AdminTree.vue?63be","webpack:///./src/components/AdminTree.vue?8575","webpack:///./src/components/AdminTree.vue","webpack:///./src/components/AdminTree.vue?952e","webpack:///src/components/AdminTree.vue","webpack:///./src/components/AdminTree/branch.vue?9a53","webpack:///src/components/AdminTree/branch.vue","webpack:///./src/components/AdminTree/branch.vue?c809","webpack:///./src/components/AdminTree/branch.vue","webpack:///./node_modules/vuetify/lib/components/VGrid/VContainer.js","webpack:///./src/components/AdminTree/branch.vue?6793"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","form","title","_e","fatal_errors","_l","e","key","errors","add","del","move_end","list","id","watch_parent","add_to_map","new_runner","staticRenderFns","component","VApp","VContainer","props","components","branch","map","parents","need_watch","watch","init","computed","methods","$http","get","BackendBase","params","config","then","response","D","data","success","tree","l","document","javascript","eval","catch","alert","parent_id","childs","push","method","url","action","console","log","c","error","parent_object","child","parseInt","i","obj_sort","t","arr","from","getAttribute","to","item","match","request_sort","obj_sort_by_parent","post","R","request","model","value","callback","$$v","dialog_add_form","expression","ref","parent","on","$event","type","indexOf","_k","keyCode","save","values","header_field","$set","show_errors","preventDefault","open_dialog_add_form","header","move_start","style","cur_color","shows","tree_use","show_this","length","staticStyle","go_to_edit","make_delete","level","exist_childs","Array","required","Object","Number","0","read_only","p","need_load_for_all_childs","child_list","object_id","card_format","window","open","setTimeout","$refs","input","focus","colors","not_create","max_level","name","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDialog","VIcon","VTextField","extend","functional","String","tag","default","fluid","Boolean","h","children","classes","keys","filter","startsWith","domProps","class","concat"],"mappings":"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","file":"js/chunk-7e399eb9.88bbefc2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.form.title))]),(0)?_c('pre',[_vm._v(_vm._s(_vm.map))]):_vm._e(),(_vm.fatal_errors.length)?_c('div',{staticClass:\"errors\"},_vm._l((_vm.fatal_errors),function(e){return _c('div',{key:e},[_vm._v(_vm._s(e))])}),0):[(_vm.errors.length)?_c('div',{staticClass:\"errors\"},_vm._l((_vm.errors),function(e){return _c('div',{key:e},[_vm._v(_vm._s(e))])}),0):_vm._e(),_c('div',[_c('branch',{attrs:{\"level\":1,\"form\":_vm.form,\"add\":_vm.add,\"del\":_vm.del,\"move_end\":_vm.move_end,\"list\":_vm.list,\"parent\":{id:0},\"watch_parent\":_vm.watch_parent,\"add_to_map\":_vm.add_to_map,\"new_runner\":_vm.new_runner}})],1)]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTree.vue?vue&type=template&id=900c79ee&scoped=true&\"\nimport script from \"./AdminTree.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminTree.vue?vue&type=style&index=0&id=900c79ee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"900c79ee\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VContainer})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTree.vue?vue&type=style&index=0&id=900c79ee&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTree.vue?vue&type=style&index=0&id=900c79ee&scoped=true&lang=css&\"","<template>\n   <v-app>\n    <v-container fluid >\n      \n      <h1 class=\"title\">{{form.title}}</h1>\n        <pre v-if=\"0\">{{map}}</pre>\n        <div v-if=\"fatal_errors.length\" class=\"errors\">\n            <div v-for=\"e in fatal_errors\" :key=\"e\">{{e}}</div>\n        </div>\n        <template v-else>\n          <div v-if=\"errors.length\" class=\"errors\">\n              <div v-for=\"e in errors\" :key=\"e\">{{e}}</div>\n          </div>\n          <div>\n              <branch\n                :level=\"1\"\n                :form=\"form\"\n                :add=\"add\" :del=\"del\" :move_end=\"move_end\"\n                :list=\"list\"\n                :parent=\"{id:0}\"\n                :watch_parent=\"watch_parent\"\n                :add_to_map=\"add_to_map\"\n                :new_runner=\"new_runner\"\n              />\n          </div>\n        </template>\n        <!--<rawDisplayer class=\"col-3\" :value=\"list\" title=\"List\" />-->\n    </v-container>\n</v-app>\n</template>\n\n<script>\n// https://sortablejs.github.io/Vue.Draggable/#/functional\n\nimport branch from \"./AdminTree/branch.vue\";\n\nexport default {\n  props:['params'],\n  components:{\n      branch\n  },\n  data () {\n      return {\n            form:{},\n            list: [],\n            map:{}, // быстрое нахождение по id элемента\n            parents:{}, // быстрое нахождение parent-а по id\n            need_watch:0,\n            fatal_errors:[],\n            errors:[],\n            watch_parent:'',\n            new_runner:0\n\n      }\n      \n  },\n  created(){\n    \n    \n  },\n  watch:{\n    params(){\n      this.init();\n    }\n  },\n  mounted(){\n    this.init()\n    /*\n    self=this\n    document.addEventListener('keydown', function(event) {\n      console.log(event.code)\n      if(event.code=='KeyN'){\n        // \n        //self.new_runner++\n        //console.log(self.new_runner)\n      }\n      if (event.code == 'KeyZ' && (event.ctrlKey || event.metaKey)) {\n        alert('Отменить!')\n      }\n    })\n    */\n  },\n  /*\n  beforeDestroy(){\n    document.removeEventListener('keydown', function(event) {\n    })\n  },\n  */\n  computed:{\n\n  },\n  methods:{\n\n    init(){\n        this.$http.get(BackendBase+'/admin-tree/'+this.params.config).then(response=>{\n            var D=response.data;\n            if(D.success){\n                this.list=D.tree; this.form=D.form;\n                for(let l of this.list){\n                    this.add_to_map(null,l)\n                }\n                document.title=this.form.title;\n                \n                if(D.javascript)\n                  eval(D.javascript);\n            }\n            else{\n              this.form.title='Ошибка!';\n              this.fatal_errors=D.errors\n            }\n              \n            \n            \n          }).catch(e => {\n            alert(e);\n        });\n    },\n\n      add(parent_id,l){ // добавление элемента\n\n        if(parent_id){\n          if(this.map[parent_id])\n          this.map[parent_id].childs.push(l)\n        }\n        else{ \n          this.list.push(l);\n        }\n        this.map[l.id]=l;\n        this.parents[l.id]=parent_id;\n      },\n      del(parent_id, l){\n          //var tree=this;\n          this.$http({\n              method:'post',\n              url:BackendBase+'/admin-tree/'+this.form.config,\n              data:{\n                  config:this.form.config,\n                  action:'delete_branch',\n                  id:l.id\n              }\n          }).then(response=>{\n              let D=response.data;\n              console.log('success: ',D.success)\n              if(D.success){\n                  if(parent_id){\n                    \n                    let list=[]\n                    for(let c of this.map[parent_id].childs){\n                      if(c.id!=l.id) list.push(c)\n                    }\n                    this.map[parent_id].childs=list\n                  }\n                  else{ // удаляем из корневой ветки\n                      let list=[];\n                      for(let c of this.list){\n                        if(c.id!=l.id) list.push(c)\n                      }\n                      this.list=list;\n                  }\n                  delete this.map[l.id];\n                  delete this.parents[l.id];\n              }\n              else\n                  alert(D.error);\n          });\n      },\n      add_to_map(parent_id,l){\n\n          if( !(l.id in this.map) ){\n              this.map[l.id]=l;\n              this.parents[l.id]=parent_id;\n              if(parent_id && parent_id in this.map){\n                this.watch_parent=parent_id\n                let parent_object=this.map[parent_id]\n                if( !('childs' in parent_object) ){\n                  parent_object.childs=[]\n                  parent_object.childs.push(l)\n                }\n              }\n              \n\n          }\n         \n          if(l.childs){ // если у добавляемого элемента есть дочерние -- добавляем их тоже\n              \n              for(let child of l.childs){\n                this.add_to_map(l.id,child)\n              }\n          }\n\n      },\n      obj_sort_by_parent(parent_id){\n        parent_id=parseInt(parent_id);\n        let list=[];\n        if(!parent_id)\n          list=this.list\n        else{\n          list=this.map[parent_id].childs    \n        }\n\n          \n        \n        let i=1; let obj_sort={};\n        for(let t of list)\n            obj_sort[t.id]=i++;\n        \n        return obj_sort;\n      },\n      move_end(e){\n          let arr;\n          let from=e.from.getAttribute('id'),\n              to=e.to.getAttribute('id'),\n              item=e.item.getAttribute('id');\n          \n          console.log({from:from})\n              arr=from.match(/p-([0-9]+)/); from=arr[1]; \n              arr=to.match(/p-([0-9]+)/); to=arr[1]; \n              arr=item.match(/li-([0-9]+)/); item=arr[1]; \n\n          console.log({\n               from:from,\n               to:to,\n               item:item,\n               arr:arr\n          });\n          \n\n          if(from==to) // перемещение в пределах одной ветки\n              this.request_sort(from,this.obj_sort_by_parent(from));\n          \n          else // если ветки разные -- сначала переносим объект, потом сортируем ветки\n              this.$http.post( \n                BackendBase+'/admin-tree/'+this.form.config,\n                {\n                  action:'move',id:item,to:to\n                }\n              ).then(\n                response=>{\n                  let R=response.data;\n                  this.errors=R.errors;\n                  if(R.success){\n                    this.request_sort(from,this.obj_sort_by_parent(from));\n                    this.request_sort(to,this.obj_sort_by_parent(to));\n                  }\n\n                }\n              ).catch(\n                e=>{\n                  this.errors=['Ошибка при перемещении объекта: '+e]\n                }\n              )\n      },\n      request_sort(parent_id,obj_sort){\n          this.$http.post(\n              BackendBase+'/admin-tree/'+this.form.config,\n              {\n                  action:'sort',\n                  config:this.form.config,\n                  parent_id:parent_id,\n                  obj_sort:obj_sort\n              }\n          ).then(request=>{\n              var R=request.data;\n              this.errors=R.errors;\n              if(!R.success){\n                  //alert('Ошибка сети при отправки запроса на сортировку')\n              }\n          }).catch({\n              function(error){\n                  alert(error)\n              }\n          })\n      }\n  }\n  \n}\n</script>\n<style scoped>\n.errors {color: red;}\n.errors div {margin: 0.5rem;}\nul{\n      list-style-type: none;\n}\n\n</style>","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-dialog',{attrs:{\"max-width\":\"500\"},model:{value:(_vm.dialog_add_form),callback:function ($$v) {_vm.dialog_add_form=$$v},expression:\"dialog_add_form\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Создание нового элемента\")]),_c('v-card-text',[_c('v-text-field',{ref:'new_header'+_vm.parent.id,attrs:{\"label\":\"Наименование раздела\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save()}},model:{value:(_vm.values[_vm.form.header_field]),callback:function ($$v) {_vm.$set(_vm.values, _vm.form.header_field, $$v)},expression:\"values[form.header_field]\"}})],1),_c('v-card-actions',[_c('div',{staticClass:\"flex-grow-1\"}),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog_add_form=false}}},[_vm._v(\"Отменить\")]),_c('v-btn',{attrs:{\"color\":\"primary darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"Сохранить\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"500\"},model:{value:(_vm.show_errors),callback:function ($$v) {_vm.show_errors=$$v},expression:\"show_errors\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Произошли ошибки\")]),_c('v-card-text',[_c('errors',{attrs:{\"errors\":_vm.errors}})],1),_c('v-card-actions',[_c('div',{staticClass:\"flex-grow-1\"}),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":function($event){_vm.show_errors=false}}},[_vm._v(\"Закрыть\")])],1)],1)],1),_c('div',{staticClass:\"Area\"},[(_vm.make_add )?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.open_dialog_add_form($event)}}},[_vm._v(\"добавить\\n            \"),(_vm.parent.id)?_c('span',[_vm._v(\" в \\\"\"+_vm._s(_vm.parent.header)+\"\\\" \")]):_c('span',[_vm._v(\" в /\")])]):_vm._e(),(_vm.form.sort)?_c('div',[(_vm.list.length)?_c('draggable',{staticClass:\"list-group\",attrs:{\"id\":'p-'+_vm.parent.id,\"tag\":\"ul\",\"list\":_vm.list,\"ghost-class\":\"ghost\",\"options\":{'group':'g'+_vm.parent.id}},on:{\"start\":_vm.move_start,\"end\":_vm.move_end}},_vm._l((_vm.list),function(l){return _c('li',{key:l.id,attrs:{\"id\":'li-'+l.id}},[_c('div',[_c('div',{staticClass:\"li_header\",style:({\"background\":_vm.cur_color})},[(_vm.form.tree_use)?_c('div',{staticClass:\"plus-icon \"},[(!_vm.shows[l.id] && _vm.form.tree_use)?_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.show_this(l)}}},[_vm._v(\"fa fa-plus\")]):_vm._e(),(_vm.shows[l.id])?_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.shows[l.id]=false}}},[_vm._v(\"fa fa-minus\")]):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"branch-header\"},[_vm._v(\"\\n                            \"+_vm._s(l.header)+\" \\n                            \"),(l.childs && _vm.form.tree_use)?[_vm._v(\"(\"+_vm._s(l.childs.length)+\")\")]:_vm._e()],2),_c('div',{staticClass:\"branch-tools \",staticStyle:{\"display\":\"block\",\"position\":\"relative\",\"top\":\"-30px\",\"height\":\"0\",\"margin-bottom\":\"0\",\"text-align\":\"right\"}},[_c('a',{attrs:{\"href\":'/edit_form/'+_vm.form.config+'/'+l.id},on:{\"click\":function($event){$event.preventDefault();return _vm.go_to_edit(l.id)}}},[_c('v-icon',{attrs:{\"color\":\"primary\",\"small\":\"\"}},[_vm._v(\"edit\")])],1),_vm._v(\" \\n                            \"),(_vm.make_delete(_vm.parent.id,l))?_c('v-icon',{staticStyle:{\"font-size\":\"10pt\"},attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.del(_vm.parent.id,l)}}},[_vm._v(\"fa fa-trash\")]):_vm._e()],1)]),(_vm.shows[l.id])?[(l.childs)?_c('nested-draggable',{attrs:{\"form\":_vm.form,\"level\":(_vm.level+1),\"list\":l.childs,\"add_to_map\":_vm.add_to_map,\"parent\":l,\"add\":_vm.add,\"del\":_vm.del,\"move_end\":_vm.move_end}}):_vm._e()]:_vm._e()],2)])}),0):_vm._e()],1):[(_vm.list.length)?_c('ul',_vm._l((_vm.list),function(l){return _c('li',{key:l.id,attrs:{\"id\":'li-'+l.id}},[_c('div',{staticClass:\"li_header\"},[_c('div',{staticClass:\"ws-nowrap\"},[(_vm.form.tree_use)?_c('div',{staticClass:\"plus-icon float-left\"},[(!_vm.shows[l.id] && _vm.form.tree_use)?_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.show_this(l)}}},[_vm._v(\"fa fa-plus\")]):_vm._e(),(_vm.shows[l.id])?_c('v-icon',{attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.shows[l.id]=false}}},[_vm._v(\"fa fa-minus\")]):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"branch-header\"},[_vm._v(\"\\n                            \"+_vm._s(l.header)+\"\\n                            \"),(l.childs && _vm.form.tree_use)?[_vm._v(\"(\"+_vm._s(l.childs.length)+\")\")]:_vm._e()],2),_c('div',{staticClass:\"branch-tools float-right\"},[_c('a',{attrs:{\"href\":'/edit_form/'+_vm.form.config+'/'+l.id},on:{\"click\":function($event){$event.preventDefault();return _vm.go_to_edit(l.id)}}},[_c('v-icon',{attrs:{\"color\":\"primary\",\"small\":\"\"}},[_vm._v(\"edit\")])],1),_vm._v(\" \\n                            \"),(_vm.make_delete(_vm.parent.id,l))?_c('v-icon',{staticStyle:{\"font-size\":\"10pt\"},attrs:{\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.del(_vm.parent.id,l)}}},[_vm._v(\"fa fa-trash\")]):_vm._e()],1)])]),(_vm.shows[l.id])?[(l.childs)?_c('nested-draggable',{attrs:{\"form\":_vm.form,\"level\":(_vm.level+1),\"list\":l.childs,\"add_to_map\":_vm.add_to_map,\"parent\":l,\"add\":_vm.add,\"del\":_vm.del,\"move_end\":_vm.move_end}}):_vm._e()]:_vm._e()],2)}),0):_vm._e()],(!_vm.exist_childs)?_c('div',{staticClass:\"li_empty\"},[_vm._v(\"\\n        [ пусто ]\\n    \")]):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        \n        <v-dialog v-model=\"dialog_add_form\" max-width=\"500\">\n            <v-card>\n                <v-card-title  class=\"headline\">Создание нового элемента</v-card-title>\n                <v-card-text>\n                    <v-text-field  @keyup.enter=\"save()\" label=\"Наименование раздела\" :ref=\"'new_header'+parent.id\" v-model=\"values[form.header_field]\" />\n                </v-card-text>\n                <v-card-actions>\n                    <div class=\"flex-grow-1\"></div>\n                    <v-btn color=\"red\" text @click=\"dialog_add_form=false\">Отменить</v-btn>\n                    <v-btn color=\"primary darken-1\" text @click=\"save()\">Сохранить</v-btn>   \n                </v-card-actions>  \n            </v-card>\n        </v-dialog>\n        \n        <v-dialog v-model=\"show_errors\" max-width=\"500\">\n            <v-card>\n                <v-card-title  class=\"headline\">Произошли ошибки</v-card-title>\n                <v-card-text>\n                    <errors :errors=\"errors\" />\n                </v-card-text>\n                <v-card-actions>\n                    <div class=\"flex-grow-1\"></div>\n                    <v-btn color=\"red\" text @click=\"show_errors=false\">Закрыть</v-btn>\n                      \n                </v-card-actions>  \n            </v-card>\n        </v-dialog>\n        <div class=\"Area\">\n        <a href=\"#\" v-if=\"make_add \" @click.prevent=\"open_dialog_add_form\">добавить\n                <span v-if=\"parent.id\"> в \"{{parent.header}}\" </span>\n                <span v-else> в /</span>\n        </a>\n        <div v-if=\"form.sort\">\n            \n            <!-- -->\n            <draggable\n                :id=\"'p-'+parent.id\"\n                tag=\"ul\"\n                v-if=\"list.length\"\n                :list=\"list\"\n                class=\"list-group\"\n                ghost-class=\"ghost\"\n                :options=\"{'group':'g'+parent.id}\"\n                @start=\"move_start\"\n                @end=\"move_end\"\n                \n            >   \n                <li v-for=\"l in list\" :key=\"l.id\" :id=\"'li-'+l.id\" >\n                <div >\n                    <div class=\"li_header\" :style='{\"background\":cur_color}'  >\n                            <div class=\"plus-icon \" v-if=\"form.tree_use\" >\n                                <v-icon small color=\"primary\" v-if=\"!shows[l.id] && form.tree_use\" @click=\"show_this(l)\">fa fa-plus</v-icon>\n                                <v-icon small color=\"primary\" v-if=\"shows[l.id]\" @click=\"shows[l.id]=false\">fa fa-minus</v-icon>\n                            </div>\n                            <div class=\"branch-header\" >\n                                {{ l.header }} \n                                <template v-if=\"l.childs && form.tree_use\">({{l.childs.length}})</template>\n                            </div>\n                            <div class=\"branch-tools \" style=\"display: block; position: relative; top: -30px; height: 0; margin-bottom: 0; text-align: right; \">\n                                <a :href=\"'/edit_form/'+form.config+'/'+l.id\" @click.prevent=\"go_to_edit(l.id)\"><v-icon color=\"primary\" small >edit</v-icon></a>&nbsp;\n                                <v-icon v-if=\"make_delete(parent.id,l)\" small style=\"font-size: 10pt;\" color=\"primary\" @click=\"del(parent.id,l)\">fa fa-trash</v-icon>\n                            </div>\n                    </div>\n                    <template v-if=\"shows[l.id]\">\n                        <nested-draggable v-if=\"l.childs\"\n                            :form=\"form\"\n                            :level=\"(level+1)\"\n                            :list=\"l.childs\" :add_to_map=\"add_to_map\"\n                            :parent=\"l\"\n                            :add=\"add\" :del=\"del\" :move_end=\"move_end\"\n                        />\n                    </template>\n\n                </div>\n\n                </li>\n            </draggable>\n        </div>\n        <template v-else>\n            <ul v-if=\"list.length\">\n                <li v-for=\"l in list\" :key=\"l.id\" :id=\"'li-'+l.id\">\n                    <div class=\"li_header\">\n                        <div class=\"ws-nowrap\">\n                            <div class=\"plus-icon float-left\" v-if=\"form.tree_use\">\n                                <v-icon small color=\"primary\" v-if=\"!shows[l.id] && form.tree_use\" @click=\"show_this(l)\">fa fa-plus</v-icon>\n                                <v-icon small color=\"primary\" v-if=\"shows[l.id]\" @click=\"shows[l.id]=false\">fa fa-minus</v-icon>\n                            </div>\n                            <div class=\"branch-header\">\n                                {{ l.header }}\n                                <template v-if=\"l.childs && form.tree_use\">({{l.childs.length}})</template>\n                            </div>\n                            <div class=\"branch-tools float-right\">\n                                <a :href=\"'/edit_form/'+form.config+'/'+l.id\" @click.prevent=\"go_to_edit(l.id)\"><v-icon color=\"primary\" small >edit</v-icon></a>&nbsp;\n                                <v-icon v-if=\"make_delete(parent.id,l)\" small style=\"font-size: 10pt;\" color=\"primary\" @click=\"del(parent.id,l)\">fa fa-trash</v-icon>\n                            </div>\n                        </div>\n                    </div>\n\n                    <template v-if=\"shows[l.id]\">\n                        <nested-draggable v-if=\"l.childs\"\n                            :form=\"form\"\n                            :level=\"(level+1)\"\n                            :list=\"l.childs\" :add_to_map=\"add_to_map\"\n                            :parent=\"l\"\n                            :add=\"add\" :del=\"del\" :move_end=\"move_end\"\n                        />\n                    </template>\n                </li>\n                \n            </ul>\n        </template>\n        <div v-if=\"!exist_childs\" class=\"li_empty\">\n            [ пусто ]\n        </div>\n        </div>\n    </div>\n</template>\n<script>\n\nexport default {\n  props: {\n    list: {type: Array,required:false},\n    form:{type:Object,required:false},\n    level:{type:Number,required:false},\n    parent:{required:true}, // вышестоящий элемент\n    add:{required:true},\n    del:{required:true},\n    move_end:{required:true},\n    add_to_map:{required:true},\n    new_runner:{type:Number,required:false},\n  },\n  data(){\n      return {\n          dialog_add_form: false,\n          values:{},\n          errors:[],\n          show_errors:false,\n          shows:{\n            0:false          \n          },\n          \n      }\n  },\n  methods:{\n        make_delete(parent_id,l){\n            // можно сделать зависимо от веток дерева\n            if(this.form.read_only)\n                return false\n            return this.form.make_delete\n                \n            \n        },\n        make_open_childs(l){ // возможно ли раскрыть ветку? (показывать ли кнопку с плюсиком)\n            return !this.shows[l.id] && this.tree_use\n        },\n        show_this(l){\n            let shows={};\n            \n            for(let p in this.shows)\n                shows[p]=this.shows[p];\n            \n            this.shows[l.id]=true;\n            if(this.form.tree_use && !l.childs){ // получаем child-ы с сервера\n                    \n                    this.$http.post(\n                        BackendBase+'/admin-tree/'+this.form.config,\n                        {action:'get_branch', parent_id:l.id}\n                    ).then(\n                        response=>{\n                            let D=response.data;\n                            if(D.success){\n                              l.childs=D.data;\n                              for(let c of l.childs){\n                                  this.add_to_map(this.parent.id,c);\n                              }\n\n                              shows[l.id]=true;\n                              this.shows=shows;\n                            }\n\n                    }).catch(function(){\n                        alert('server error!');\n                    });\n                \n            }\n            else{ // child-ы уже загружены\n                if(this.form.tree_use){\n                    let need_load_for_all_childs=false\n                    let child_list=[]\n                    for(let c of l.childs){\n                        if( !('childs' in c) ){\n                            child_list.push(c.id)\n                            need_load_for_all_childs=true\n                        }\n                    }\n                    if(need_load_for_all_childs){ // отправляем запрос для получения всех child-ов для child-ов )\n\n                    }\n                    this.$http.post(\n                        BackendBase+'/admin-tree/'+this.form.config,\n                        {action:'load_many_childs',list:child_list}\n                    ).then(\n                        response=>{\n                            let D=response.data\n                            if(D.success){\n                                for(let object_id in D.data){\n                                    for(let child of D.data[object_id]){\n                                        \n                                        this.add_to_map(object_id,child)\n                                    }\n                                    \n                                }\n                            }\n                        }\n                    )\n                }\n\n                shows[l.id]=true;\n                this.shows=shows;\n            }\n\n            \n        },\n        save(l){\n            \n            this.$http.post(\n                BackendBase+'/admin-tree/'+this.form.config,\n                {\n                    action:'add_branch_plain',\n                    parent_id:this.parent.id,\n                    header:this.values[this.form.header_field]\n                }\n            ).then(\n                R=>{\n                    let D=R.data;\n                    if(D.success){\n                        // добавляем в структуру\n                        \n                        this.add(this.parent.id,D.data);\n                        this.values={};\n                    }\n                    else{\n                        this.show_errors=true, this.errors=D.errors\n                    }\n                    this.dialog_add_form=false;\n                    \n                }\n            );  \n        },\n        go_to_edit(key){\n            let url=''; \n            if(this.form.card_format && this.form.card_format == 'old')\n                url='/edit_form.pl?config='+config+'&action=edit&id='+key;            \n            else\n                url='/edit_form/'+this.form.config+'/'+key\n            window.open(url);\n        },\n        open_dialog_add_form(l){\n            this.dialog_add_form=true;\n            \n            l=l?l:this.parent.id;\n            console.log({parent:this.parent.id})\n            // хз почему, но без setTimeout не работает\n            setTimeout(\n                ()=>{\n                    \n                    if(this.parent.id && this.$refs['new_header'+this.parent.id]){\n                        this.$refs['new_header'+this.parent.id].$refs.input.focus();\n                    }\n                    else{\n                        console.log('not refs: '+'new_header'+this.parent.id)\n                    }\n                    \n                    //this.$refs['new_header'+this.parent.id].$refs.input.focus();\n                },\n                100\n            );\n            //this.$refs.new_header.focus();\n            \n            //this.$refs['new_header'].focus()\n        },\n        move_start(){\n\n        }\n  },\n  computed:{\n      cur_color(){\n          let colors=['#CFD8DC','#D7CCC8','#FFCCBC','#FFE0B2','#FFECB3','#FFF9C4','#F0F4C3','#DCEDC8','#C8E6C9','#B2DFDB','#B2EBF2','#B3E5FC','#BBDEFB','#C5CAE9'];\n          if(this.level in colors)\n            return colors[this.level]\n          return '#ffffff'\n      },\n      exist_childs(){\n        return (this.list && this.list.length>0)\n      },\n      make_add(){\n        return (!this.form.not_create && (!this.form.max_level || (parseInt(this.form.max_level) >= parseInt(this.level)) ))\n      }\n  },\n  mounted(){\n\n  },\n  watch:{\n      new_runner(){\n          if(this.new_runner){\n              this.dialog_add_form=true\n          }\n            \n      }\n  },\n  name: \"nested-draggable\"\n};\n</script>\n<style scoped>\n.Area {\n  min-height: 50px;\n  max-width: 1000px;\n  padding: 0 0.5rem 0 1rem; \n  /*outline: 1px dashed;*/\n\n}\n.Area ul {list-style: none; padding: 0; min-height: 40px; /*border: 1px solid gray;*/}\n.add_form {\n    border: 1px solid gray;\n    max-width: 250px;\n    padding: 1rem;\n}\n\n.li_header {\n    border: 1px solid #E8EAF6; border-radius: 10px; width: 85%; max-width: 1000px; padding: 0.5rem;\n    margin-bottom: 0.5rem;\n    margin-top: 0.5rem;\n}\n.li_empty{\n    /*border: 1.5px solid deepskyblue;*/\n    border-radius: 10px;\n    min-width: 350px;\n    padding: 0.5rem;\n    margin-bottom: 0.5rem;\n    margin-top: 0.5rem;\n}\ndiv.plus-icon{\n    min-width: 20px; \n    display:inline-block;\n}\ndiv.plus-icon button {margin: 0;}\ndiv.branch-header{\n    width:auto; \n    max-width: 80%;\n    display:inline-block;\n}\ndiv.branch-tools{\n    width:auto;\n    display:inline-block; \n    min-width: 30px;\n    margin-bottom: 20px;\n}\ndiv.branch-tools a{text-decoration: none;}\n.ws-nowrap{\n    white-space:nowrap;\n}\n\nli.sortable-ghost .li_header {\n    background-color:#e4e4ff;\n}\nli:hover .li_header > .li_header {\n    background-color:#ffffff !important;\n}\nul[aria-grabbed=\"true\"] .li_header{\n    background-color: #E8EAF6;\n}\nul[aria-grabbed=\"true\"] .li_header .li_header{\n    background-color: #ffffff;\n}\n.item-dropzone-area {\n    height: 2rem;\n    background: #888;\n    opacity: 0.8;\n    animation-duration: 0.5s;\n    animation-name: nodeInserted;\n}\n@media only screen and (max-width: 500px) {\n    div.plus-icon{\n        width: 20px;\n    }\n    .li_header {\n        width: 100%;\n    }\n    div.branch-header{\n        \n        max-width: 80%;\n        display:inline-block;\n    }\n    .div.branch-tools{\n        width: 50px;;        \n    }\n    .li_empty{\n        min-width: 230px;\n    }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./branch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./branch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./branch.vue?vue&type=template&id=b77821f6&scoped=true&\"\nimport script from \"./branch.vue?vue&type=script&lang=js&\"\nexport * from \"./branch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./branch.vue?vue&type=style&index=0&id=b77821f6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b77821f6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VIcon,VTextField})\n","import \"../../../src/components/VGrid/_grid.sass\";\nimport \"../../../src/components/VGrid/VGrid.sass\";\nimport Grid from './grid';\nimport mergeData from '../../util/mergeData';\n/* @vue/component */\n\nexport default Grid('container').extend({\n  name: 'v-container',\n  functional: true,\n  props: {\n    id: String,\n    tag: {\n      type: String,\n      default: 'div'\n    },\n    fluid: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  render(h, {\n    props,\n    data,\n    children\n  }) {\n    let classes;\n    const {\n      attrs\n    } = data;\n\n    if (attrs) {\n      // reset attrs to extract utility clases like pa-3\n      data.attrs = {};\n      classes = Object.keys(attrs).filter(key => {\n        // TODO: Remove once resolved\n        // https://github.com/vuejs/vue/issues/7841\n        if (key === 'slot') return false;\n        const value = attrs[key]; // add back data attributes like data-test=\"foo\" but do not\n        // add them as classes\n\n        if (key.startsWith('data-')) {\n          data.attrs[key] = value;\n          return false;\n        }\n\n        return value || typeof value === 'string';\n      });\n    }\n\n    if (props.id) {\n      data.domProps = data.domProps || {};\n      data.domProps.id = props.id;\n    }\n\n    return h(props.tag, mergeData(data, {\n      staticClass: 'container',\n      class: Array({\n        'container--fluid': props.fluid\n      }).concat(classes || [])\n    }), children);\n  }\n\n});\n//# sourceMappingURL=VContainer.js.map","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./branch.vue?vue&type=style&index=0&id=b77821f6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./branch.vue?vue&type=style&index=0&id=b77821f6&scoped=true&lang=css&\""],"sourceRoot":""}