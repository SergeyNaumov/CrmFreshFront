(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce2b09c8"],{"37bd":function(e,t,a){"use strict";var s=a("ad84"),r=a.n(s);r.a},ad84:function(e,t,a){},f406:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apteka_list"},[a("h3",[e._v("Аптеки:")]),e._l(e.list,(function(t,s){return a("div",{key:s},[a("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.more=!t.more}}},[e._v(e._s(t.ur_address))]),t.more?a("div",{staticClass:"more"},[e._m(0,!0),t.m_id?[a("AptManagerEdit",{attrs:{apteka:t}})]:[a("p",[e._v("\n                Для данной аптеки не добавлен представитель\n                "),e.show_create_form?e._e():a("v-btn",{ref:"button",refInFor:!0,attrs:{color:"primary",small:""},on:{click:function(t){t.preventDefault(),e.show_create_form=!0}}},[e._v("Добавить")]),e.show_create_form?a("v-card",{staticClass:"create_form"},[a("v-card-text",[a("h3",[e._v("Добавление представителя аптеки:")]),e.success_register?[a("p",[e._v("Вы успешно добавили представителя аптеки!")]),a("v-btn",{ref:"button",refInFor:!0,attrs:{color:"primary",small:""},on:{click:e.get_reg_data}},[e._v("Закрыть")]),e._v(" \n                    ")]:[a("v-text-field",{attrs:{label:"Логин","error-messages":e.error.login},on:{keyup:e.check_login},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),a("v-text-field",{attrs:{label:"Пароль","error-messages":e.error.password},on:{keyup:e.check_login},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{label:"Фамилия","error-messages":e.error.name_f},on:{keyup:e.check_reg_data},model:{value:e.name_f,callback:function(t){e.name_f=t},expression:"name_f"}}),a("v-text-field",{attrs:{label:"Имя","error-messages":e.error.name_i},on:{keyup:e.check_reg_data},model:{value:e.name_i,callback:function(t){e.name_i=t},expression:"name_i"}}),a("v-text-field",{attrs:{label:"Отчество","error-messages":e.error.name_o},on:{keyup:e.check_reg_data},model:{value:e.name_o,callback:function(t){e.name_o=t},expression:"name_o"}}),a("v-text-field",{attrs:{label:"Телефон","error-messages":e.error.phone},on:{keyup:e.check_reg_data},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],a("errors",{attrs:{errors:e.errors}})],2),e.success_register?e._e():[a("v-btn",{ref:"button",refInFor:!0,attrs:{color:"primary",small:"",disabled:!e.reg_data_ok},on:{click:function(a){return e.register_apt_manager(t.id)}}},[e._v("Добавить")]),e._v(" \n                    "),a("v-btn",{ref:"button",refInFor:!0,attrs:{color:"red",small:""},on:{click:function(t){e.show_create_form=!1}}},[e._v("Отменить")])]],2):e._e()],1)],a("hr"),a("div",{staticClass:"subscribes"},[a("v-checkbox",{attrs:{"hide-details":"",label:"отображать график выполнения плана"},on:{change:function(a){return e.change_set(1,t)}},model:{value:t.set1,callback:function(a){e.$set(t,"set1",a)},expression:"a.set1"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.saved_s1,expression:"a.saved_s1"}],staticClass:"saved"}),a("v-checkbox",{attrs:{"hide-details":"",label:"показывать % выполнения плана другими аптеками сети"},on:{change:function(a){return e.change_set(2,t)}},model:{value:t.set2,callback:function(a){e.$set(t,"set2",a)},expression:"a.set2"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.saved_s2,expression:"a.saved_s2"}],staticClass:"saved"})],1)],2):e._e()])}))],2)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b",[e._v("Данные представителя:")])])}],o=a("4bb9"),n={props:["comp","get_reg_data"],created(){this.list=this.comp.apteka_list},watch:{comp(){this.list=this.comp.apteka_list},show_create_form(){this.password=Object(o["b"])()}},data(){return{list:[],chk_login_cnt:0,success_register:!1,login:"",password:"",name_f:"",name_i:"",name_o:"",phone:"",reg_data_ok:!1,edit_data_ok:!1,errors:[],error:{login:"",phone:"",name_f:"",name_i:"",name_o:""},edit_error:{login:"",phone:"",name_f:"",name_i:"",name_o:""},show_create_form:!1}},computed:{},methods:{check_login(){this.reg_data_ok=!0,Object(o["a"])(this.login)?0==this.chk_login_cnt&&(this.chk_login_cnt++,this.$http.post(BackendBase+"/anna/check-account-login",{login:this.login}).then(e=>{let t=e.data;this.chk_login_cnt--,t.success?this.check_reg_data():t.errors.length&&(this.error["login"]=t.errors[0])})):(this.error["login"]="Логин должен являеть валидным адресом электронной почты",this.reg_data_ok=!1)},check_reg_data(){this.phone=Object(o["e"])(this.phone),this.reg_data_ok=!0,this.errors=[];for(let e in this.error)this.error[e]="";Object(o["d"])(this.phone)||(this.error["phone"]="Введите номер телефона в правильном формате",this.reg_data_ok=!1),this.name_f||(this.error["name_f"]="укажите фамилию",this.reg_data_ok=!1),this.name_i||(this.error["name_i"]="укажите имя",this.reg_data_ok=!1),this.name_o||(this.error["name_o"]="укажите отчество",this.reg_data_ok=!1),this.password.length<6&&(this.error["password"]="длина пароля должна быть не менее 6-ти символов",this.reg_data_ok=!1)},register_apt_manager(e){this.$http.post(BackendBase+"/anna/reg-apteka-account",{apteka_id:e,login:this.login,password:this.password,name_f:this.name_f,name_i:this.name_i,name_o:this.name_o,phone:this.phone}).then(e=>{let t=e.data;t.success?this.success_register=!0:this.errors=t.errors})},change_set(e,t){let a=t["set"+e]?"1":"0";this.$http.post(BackendBase+"/anna/change-set-apteka",{apteka_id:t.id,number:e,value:a}).then(s=>{let r=s.data;r.success?(t["saved_s"+e]=!0,setTimeout(()=>{t["saved_s"+e]=!1},500)):(t["set"+e]=!!a,alert("произошла ошибка при сохранении"))}).catch(()=>{alert("произошла ошибка при сохранении"),t["set"+e]=!!a})}}},i=n,c=(a("37bd"),a("2877")),_=a("6544"),l=a.n(_),h=a("8336"),d=a("b0af"),m=a("99d9"),p=a("ac7c"),u=a("8654"),g=Object(c["a"])(i,s,r,!1,null,null,null);t["default"]=g.exports;l()(g,{VBtn:h["a"],VCard:d["a"],VCardText:m["b"],VCheckbox:p["a"],VTextField:u["a"]})}}]);
//# sourceMappingURL=chunk-ce2b09c8.ea961916.js.map